"use strict";var Uc=Object.create;var on=Object.defineProperty;var Wc=Object.getOwnPropertyDescriptor;var zc=Object.getOwnPropertyNames;var qc=Object.getPrototypeOf,jc=Object.prototype.hasOwnProperty;var ur=(n,t)=>()=>(n&&(t=n(n=0)),t);var Q=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),fs=(n,t)=>{for(var o in t)on(n,o,{get:t[o],enumerable:!0})},ds=(n,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of zc(t))!jc.call(n,a)&&a!==o&&on(n,a,{get:()=>t[a],enumerable:!(i=Wc(t,a))||i.enumerable});return n};var X=(n,t,o)=>(o=n!=null?Uc(qc(n)):{},ds(t||!n||!n.__esModule?on(o,"default",{value:n,enumerable:!0}):o,n)),$c=n=>ds(on({},"__esModule",{value:!0}),n);var ys=Q((Fd,bs)=>{bs.exports=ps;ps.sync=Gc;var hs=require("fs");function Hc(n,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var a=o[i].toLowerCase();if(a&&n.substr(-a.length).toLowerCase()===a)return!0}return!1}function ms(n,t,o){return!n.isSymbolicLink()&&!n.isFile()?!1:Hc(t,o)}function ps(n,t,o){hs.stat(n,function(i,a){o(i,i?!1:ms(a,n,t))})}function Gc(n,t){return ms(hs.statSync(n),n,t)}});var Es=Q((Md,_s)=>{_s.exports=Ss;Ss.sync=Vc;var gs=require("fs");function Ss(n,t,o){gs.stat(n,function(i,a){o(i,i?!1:ws(a,t))})}function Vc(n,t){return ws(gs.statSync(n),t)}function ws(n,t){return n.isFile()&&Yc(n,t)}function Yc(n,t){var o=n.mode,i=n.uid,a=n.gid,l=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),f=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),b=parseInt("100",8),p=parseInt("010",8),m=parseInt("001",8),y=b|p,S=o&m||o&p&&a===f||o&b&&i===l||o&y&&l===0;return S}});var Ts=Q((Wd,Rs)=>{var Ud=require("fs"),sn;process.platform==="win32"||global.TESTING_WINDOWS?sn=ys():sn=Es();Rs.exports=fo;fo.sync=Qc;function fo(n,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,a){fo(n,t||{},function(l,f){l?a(l):i(f)})})}sn(n,t||{},function(i,a){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,a=!1),o(i,a)})}function Qc(n,t){try{return sn.sync(n,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var xs=Q((zd,Os)=>{var Wt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Cs=require("path"),Kc=Wt?";":":",Ps=Ts(),Is=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),As=(n,t)=>{let o=t.colon||Kc,i=n.match(/\//)||Wt&&n.match(/\\/)?[""]:[...Wt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],a=Wt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",l=Wt?a.split(o):[""];return Wt&&n.indexOf(".")!==-1&&l[0]!==""&&l.unshift(""),{pathEnv:i,pathExt:l,pathExtExe:a}},vs=(n,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:i,pathExt:a,pathExtExe:l}=As(n,t),f=[],b=m=>new Promise((y,S)=>{if(m===i.length)return t.all&&f.length?y(f):S(Is(n));let v=i[m],A=/^".*"$/.test(v)?v.slice(1,-1):v,w=Cs.join(A,n),W=!A&&/^\.[\\\/]/.test(n)?n.slice(0,2)+w:w;y(p(W,m,0))}),p=(m,y,S)=>new Promise((v,A)=>{if(S===a.length)return v(b(y+1));let w=a[S];Ps(m+w,{pathExt:l},(W,x)=>{if(!W&&x)if(t.all)f.push(m+w);else return v(m+w);return v(p(m,y,S+1))})});return o?b(0).then(m=>o(null,m),o):b(0)},Zc=(n,t)=>{t=t||{};let{pathEnv:o,pathExt:i,pathExtExe:a}=As(n,t),l=[];for(let f=0;f<o.length;f++){let b=o[f],p=/^".*"$/.test(b)?b.slice(1,-1):b,m=Cs.join(p,n),y=!p&&/^\.[\\\/]/.test(n)?n.slice(0,2)+m:m;for(let S=0;S<i.length;S++){let v=y+i[S];try{if(Ps.sync(v,{pathExt:a}))if(t.all)l.push(v);else return v}catch{}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw Is(n)};Os.exports=vs;vs.sync=Zc});var Ds=Q((qd,ho)=>{"use strict";var Ls=(n={})=>{let t=n.env||process.env;return(n.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};ho.exports=Ls;ho.exports.default=Ls});var Fs=Q((jd,Bs)=>{"use strict";var ks=require("path"),Xc=xs(),Jc=Ds();function Ns(n,t){let o=n.options.env||process.env,i=process.cwd(),a=n.options.cwd!=null,l=a&&process.chdir!==void 0&&!process.chdir.disabled;if(l)try{process.chdir(n.options.cwd)}catch{}let f;try{f=Xc.sync(n.command,{path:o[Jc({env:o})],pathExt:t?ks.delimiter:void 0})}catch{}finally{l&&process.chdir(i)}return f&&(f=ks.resolve(a?n.options.cwd:"",f)),f}function ef(n){return Ns(n)||Ns(n,!0)}Bs.exports=ef});var Ms=Q(($d,po)=>{"use strict";var mo=/([()\][%!^"`<>&|;, *?])/g;function tf(n){return n=n.replace(mo,"^$1"),n}function rf(n,t){return n=`${n}`,n=n.replace(/(\\*)"/g,'$1$1\\"'),n=n.replace(/(\\*)$/,"$1$1"),n=`"${n}"`,n=n.replace(mo,"^$1"),t&&(n=n.replace(mo,"^$1")),n}po.exports.command=tf;po.exports.argument=rf});var Ws=Q((Hd,Us)=>{"use strict";Us.exports=/^#!(.*)/});var qs=Q((Gd,zs)=>{"use strict";var nf=Ws();zs.exports=(n="")=>{let t=n.match(nf);if(!t)return null;let[o,i]=t[0].replace(/#! ?/,"").split(" "),a=o.split("/").pop();return a==="env"?i:i?`${a} ${i}`:a}});var $s=Q((Vd,js)=>{"use strict";var bo=require("fs"),of=qs();function sf(n){let o=Buffer.alloc(150),i;try{i=bo.openSync(n,"r"),bo.readSync(i,o,0,150,0),bo.closeSync(i)}catch{}return of(o.toString())}js.exports=sf});var Ys=Q((Yd,Vs)=>{"use strict";var af=require("path"),Hs=Fs(),Gs=Ms(),lf=$s(),uf=process.platform==="win32",cf=/\.(?:com|exe)$/i,ff=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function df(n){n.file=Hs(n);let t=n.file&&lf(n.file);return t?(n.args.unshift(n.file),n.command=t,Hs(n)):n.file}function hf(n){if(!uf)return n;let t=df(n),o=!cf.test(t);if(n.options.forceShell||o){let i=ff.test(t);n.command=af.normalize(n.command),n.command=Gs.command(n.command),n.args=n.args.map(l=>Gs.argument(l,i));let a=[n.command].concat(n.args).join(" ");n.args=["/d","/s","/c",`"${a}"`],n.command=process.env.comspec||"cmd.exe",n.options.windowsVerbatimArguments=!0}return n}function mf(n,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let i={command:n,args:t,options:o,file:void 0,original:{command:n,args:t}};return o.shell?i:hf(i)}Vs.exports=mf});var Zs=Q((Qd,Ks)=>{"use strict";var yo=process.platform==="win32";function go(n,t){return Object.assign(new Error(`${t} ${n.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${n.command}`,path:n.command,spawnargs:n.args})}function pf(n,t){if(!yo)return;let o=n.emit;n.emit=function(i,a){if(i==="exit"){let l=Qs(a,t,"spawn");if(l)return o.call(n,"error",l)}return o.apply(n,arguments)}}function Qs(n,t){return yo&&n===1&&!t.file?go(t.original,"spawn"):null}function bf(n,t){return yo&&n===1&&!t.file?go(t.original,"spawnSync"):null}Ks.exports={hookChildProcess:pf,verifyENOENT:Qs,verifyENOENTSync:bf,notFoundError:go}});var ea=Q((Kd,zt)=>{"use strict";var Xs=require("child_process"),So=Ys(),wo=Zs();function Js(n,t,o){let i=So(n,t,o),a=Xs.spawn(i.command,i.args,i.options);return wo.hookChildProcess(a,i),a}function yf(n,t,o){let i=So(n,t,o),a=Xs.spawnSync(i.command,i.args,i.options);return a.error=a.error||wo.verifyENOENTSync(a.status,i),a}zt.exports=Js;zt.exports.spawn=Js;zt.exports.sync=yf;zt.exports._parse=So;zt.exports._enoent=wo});var ha=Q((ph,cn)=>{cn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&cn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&cn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var ga=Q((bh,Ht)=>{var V=global.process,wt=function(n){return n&&typeof n=="object"&&typeof n.removeListener=="function"&&typeof n.emit=="function"&&typeof n.reallyExit=="function"&&typeof n.listeners=="function"&&typeof n.kill=="function"&&typeof n.pid=="number"&&typeof n.on=="function"};wt(V)?(ma=require("assert"),jt=ha(),pa=/^win/i.test(V.platform),fr=require("events"),typeof fr!="function"&&(fr=fr.EventEmitter),V.__signal_exit_emitter__?J=V.__signal_exit_emitter__:(J=V.__signal_exit_emitter__=new fr,J.count=0,J.emitted={}),J.infinite||(J.setMaxListeners(1/0),J.infinite=!0),Ht.exports=function(n,t){if(!wt(global.process))return function(){};ma.equal(typeof n,"function","a callback must be provided for exit handler"),$t===!1&&Co();var o="exit";t&&t.alwaysLast&&(o="afterexit");var i=function(){J.removeListener(o,n),J.listeners("exit").length===0&&J.listeners("afterexit").length===0&&fn()};return J.on(o,n),i},fn=function(){!$t||!wt(global.process)||($t=!1,jt.forEach(function(t){try{V.removeListener(t,dn[t])}catch{}}),V.emit=hn,V.reallyExit=Po,J.count-=1)},Ht.exports.unload=fn,_t=function(t,o,i){J.emitted[t]||(J.emitted[t]=!0,J.emit(t,o,i))},dn={},jt.forEach(function(n){dn[n]=function(){if(wt(global.process)){var o=V.listeners(n);o.length===J.count&&(fn(),_t("exit",null,n),_t("afterexit",null,n),pa&&n==="SIGHUP"&&(n="SIGINT"),V.kill(V.pid,n))}}}),Ht.exports.signals=function(){return jt},$t=!1,Co=function(){$t||!wt(global.process)||($t=!0,J.count+=1,jt=jt.filter(function(t){try{return V.on(t,dn[t]),!0}catch{return!1}}),V.emit=ya,V.reallyExit=ba)},Ht.exports.load=Co,Po=V.reallyExit,ba=function(t){wt(global.process)&&(V.exitCode=t||0,_t("exit",V.exitCode,null),_t("afterexit",V.exitCode,null),Po.call(V,V.exitCode))},hn=V.emit,ya=function(t,o){if(t==="exit"&&wt(global.process)){o!==void 0&&(V.exitCode=o);var i=hn.apply(this,arguments);return _t("exit",V.exitCode,null),_t("afterexit",V.exitCode,null),i}else return hn.apply(this,arguments)}):Ht.exports=function(){return function(){}};var ma,jt,pa,fr,J,fn,_t,dn,$t,Co,Po,ba,hn,ya});var Aa=Q((Sh,Ia)=>{"use strict";var{PassThrough:zf}=require("stream");Ia.exports=n=>{n={...n};let{array:t}=n,{encoding:o}=n,i=o==="buffer",a=!1;t?a=!(o||i):o=o||"utf8",i&&(o=null);let l=new zf({objectMode:a});o&&l.setEncoding(o);let f=0,b=[];return l.on("data",p=>{b.push(p),a?f=b.length:f+=p.length}),l.getBufferedValue=()=>t?b:i?Buffer.concat(b,f):b.join(""),l.getBufferedLength=()=>f,l}});var va=Q((wh,dr)=>{"use strict";var{constants:qf}=require("buffer"),jf=require("stream"),{promisify:$f}=require("util"),Hf=Aa(),Gf=$f(jf.pipeline),mn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Io(n,t){if(!n)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,i=Hf(t);return await new Promise((a,l)=>{let f=b=>{b&&i.getBufferedLength()<=qf.MAX_LENGTH&&(b.bufferedData=i.getBufferedValue()),l(b)};(async()=>{try{await Gf(n,i),a()}catch(b){f(b)}})(),i.on("data",()=>{i.getBufferedLength()>o&&f(new mn)})}),i.getBufferedValue()}dr.exports=Io;dr.exports.buffer=(n,t)=>Io(n,{...t,encoding:"buffer"});dr.exports.array=(n,t)=>Io(n,{...t,array:!0});dr.exports.MaxBufferError=mn});var xa=Q((_h,Oa)=>{"use strict";var{PassThrough:Vf}=require("stream");Oa.exports=function(){var n=[],t=new Vf({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=i,t.on("unpipe",a),Array.prototype.slice.call(arguments).forEach(o),t;function o(l){return Array.isArray(l)?(l.forEach(o),this):(n.push(l),l.once("end",a.bind(null,l)),l.once("error",t.emit.bind(t,"error")),l.pipe(t,{end:!1}),this)}function i(){return n.length==0}function a(l){n=n.filter(function(f){return f!==l}),!n.length&&t.readable&&t.end()}}});var rl=Q((sm,tl)=>{var Se=require("fs"),sd=require("util"),Vt=require("path"),zo=require("events"),Za=require("zlib"),el=require("stream"),_={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535},it=function(n){let t,o,i,a,l,f,p=this,m=n.storeEntries!==!1?{}:null,y=n.file,S=n.nameEncoding?new TextDecoder(n.nameEncoding):null;v();function v(){n.fd?(t=n.fd,A()):Se.open(y,"r",(g,E)=>{if(g)return p.emit("error",g);t=E,A()})}function A(){Se.fstat(t,(g,E)=>{if(g)return p.emit("error",g);o=E.size,i=n.chunkSize||Math.round(o/1e3),i=Math.max(Math.min(i,Math.min(128*1024,o)),Math.min(1024,o)),W()})}function w(g,E){if(g||!E)return p.emit("error",g||new Error("Archive read error"));let C=a.lastPos,T=C-a.win.position,U=a.win.buffer,F=a.minPos;for(;--C>=F&&--T>=0;)if(U.length-T>=4&&U[T]===a.firstByte&&U.readUInt32LE(T)===a.sig){a.lastBufferPosition=T,a.lastBytesRead=E,a.complete();return}if(C===F)return p.emit("error",new Error("Bad archive"));if(a.lastPos=C+1,a.chunkSize*=2,C<=F)return p.emit("error",new Error("Bad archive"));let G=Math.min(a.chunkSize,C-F);a.win.expandLeft(G,w)}function W(){let g=Math.min(_.ENDHDR+_.MAXFILECOMMENT,o);a={win:new gn(t),totalReadLength:g,minPos:o-g,lastPos:o,chunkSize:Math.min(1024,i),firstByte:_.ENDSIGFIRST,sig:_.ENDSIG,complete:x},a.win.read(o-a.chunkSize,a.chunkSize,w)}function x(){let g=a.win.buffer,E=a.lastBufferPosition;try{l=new No,l.read(g.slice(E,E+_.ENDHDR)),l.headerOffset=a.win.position+E,l.commentLength?p.comment=g.slice(E+_.ENDHDR,E+_.ENDHDR+l.commentLength).toString():p.comment=null,p.entriesCount=l.volumeEntries,p.centralDirectory=l,l.volumeEntries===_.EF_ZIP64_OR_16&&l.totalEntries===_.EF_ZIP64_OR_16||l.size===_.EF_ZIP64_OR_32||l.offset===_.EF_ZIP64_OR_32?k():(a={},D())}catch(C){p.emit("error",C)}}function k(){let g=_.ENDL64HDR;a.lastBufferPosition>g?(a.lastBufferPosition-=g,z()):(a={win:a.win,totalReadLength:g,minPos:a.win.position-g,lastPos:a.win.position,chunkSize:a.chunkSize,firstByte:_.ENDL64SIGFIRST,sig:_.ENDL64SIG,complete:z},a.win.read(a.lastPos-a.chunkSize,a.chunkSize,w))}function z(){let g=a.win.buffer,E=new Bo;E.read(g.slice(a.lastBufferPosition,a.lastBufferPosition+_.ENDL64HDR));let C=o-E.headerOffset;a={win:a.win,totalReadLength:C,minPos:E.headerOffset,lastPos:a.lastPos,chunkSize:a.chunkSize,firstByte:_.END64SIGFIRST,sig:_.END64SIG,complete:Z},a.win.read(o-a.chunkSize,a.chunkSize,w)}function Z(){let g=a.win.buffer,E=new Fo;E.read(g.slice(a.lastBufferPosition,a.lastBufferPosition+_.END64HDR)),p.centralDirectory.volumeEntries=E.volumeEntries,p.centralDirectory.totalEntries=E.totalEntries,p.centralDirectory.size=E.size,p.centralDirectory.offset=E.offset,p.entriesCount=E.volumeEntries,a={},D()}function D(){a={win:new gn(t),pos:l.offset,chunkSize:i,entriesLeft:l.volumeEntries},a.win.read(a.pos,Math.min(i,o-a.pos),H)}function H(g,E){if(g||!E)return p.emit("error",g||new Error("Entries read error"));let C=a.pos-a.win.position,T=a.entry,U=a.win.buffer,F=U.length;try{for(;a.entriesLeft>0;){T||(T=new Mo,T.readHeader(U,C),T.headerOffset=a.win.position+C,a.entry=T,a.pos+=_.CENHDR,C+=_.CENHDR);let G=T.fnameLen+T.extraLen+T.comLen,Y=G+(a.entriesLeft>1?_.CENHDR:0);if(F-C<Y){a.win.moveRight(i,H,C),a.move=!0;return}T.read(U,C,S),n.skipEntryNameValidation||T.validateName(),m&&(m[T.name]=T),p.emit("entry",T),a.entry=T=null,a.entriesLeft--,a.pos+=G,C+=G}p.emit("ready")}catch(G){p.emit("error",G)}}function N(){if(!m)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get(){return!1}}),this.entry=function(g){return N(),m[g]},this.entries=function(){return N(),m},this.stream=function(g,E){return this.openEntry(g,(C,T)=>{if(C)return E(C);let U=se(T),F=new Uo(t,U,T.compressedSize);if(T.method!==_.STORED)if(T.method===_.DEFLATED)F=F.pipe(Za.createInflateRaw());else return E(new Error("Unknown compression method: "+T.method));lt(T)&&(F=F.pipe(new Wo(F,T.crc,T.size))),E(null,F)},!1)},this.entryDataSync=function(g){let E=null;if(this.openEntry(g,(T,U)=>{E=T,g=U},!0),E)throw E;let C=Buffer.alloc(g.compressedSize);if(new rt(t,C,0,g.compressedSize,se(g),T=>{E=T}).read(!0),E)throw E;if(g.method!==_.STORED)if(g.method===_.DEFLATED||g.method===_.ENHANCED_DEFLATED)C=Za.inflateRawSync(C);else throw new Error("Unknown compression method: "+g.method);if(C.length!==g.size)throw new Error("Invalid size");return lt(g)&&new ot(g.crc,g.size).data(C),C},this.openEntry=function(g,E,C){if(typeof g=="string"&&(N(),g=m[g],!g))return E(new Error("Entry not found"));if(!g.isFile)return E(new Error("Entry is not file"));if(!t)return E(new Error("Archive closed"));let T=Buffer.alloc(_.LOCHDR);new rt(t,T,0,T.length,g.offset,U=>{if(U)return E(U);let F;try{g.readDataHeader(T),g.encrypted&&(F=new Error("Entry encrypted"))}catch(G){F=G}E(F,g)}).read(C)};function se(g){return g.offset+_.LOCHDR+g.fnameLen+g.extraLen}function lt(g){return(g.flags&8)!==8}function ut(g,E,C){p.stream(g,(T,U)=>{if(T)C(T);else{let F,G;U.on("error",Y=>{G=Y,F&&(U.unpipe(F),F.close(()=>{C(Y)}))}),Se.open(E,"w",(Y,ae)=>{if(Y)return C(Y);if(G){Se.close(t,()=>{C(G)});return}F=Se.createWriteStream(E,{fd:ae}),F.on("finish",()=>{p.emit("extract",g,E),G||C()}),U.pipe(F)})}})}function It(g,E,C){if(!E.length)return C();let T=E.shift();T=Vt.join(g,Vt.join(...T)),Se.mkdir(T,{recursive:!0},U=>{if(U&&U.code!=="EEXIST")return C(U);It(g,E,C)})}function ct(g,E,C,T,U){if(!C.length)return T(null,U);let F=C.shift(),G=Vt.join(g,F.name.replace(E,""));ut(F,G,Y=>{if(Y)return T(Y,U);ct(g,E,C,T,U+1)})}this.extract=function(g,E,C){let T=g||"";if(typeof g=="string"&&(g=this.entry(g),g?T=g.name:T.length&&T[T.length-1]!=="/"&&(T+="/")),!g||g.isDirectory){let U=[],F=[],G={};for(let Y in m)if(Object.prototype.hasOwnProperty.call(m,Y)&&Y.lastIndexOf(T,0)===0){let ae=Y.replace(T,""),Xt=m[Y];if(Xt.isFile&&(U.push(Xt),ae=Vt.dirname(ae)),ae&&!G[ae]&&ae!=="."){G[ae]=!0;let Pe=ae.split("/").filter(ft=>ft);for(Pe.length&&F.push(Pe);Pe.length>1;){Pe=Pe.slice(0,Pe.length-1);let ft=Pe.join("/");if(G[ft]||ft===".")break;G[ft]=!0,F.push(Pe)}}}F.sort((Y,ae)=>Y.length-ae.length),F.length?It(E,F,Y=>{Y?C(Y):ct(E,T,U,C,0)}):ct(E,T,U,C,0)}else Se.stat(E,(U,F)=>{F&&F.isDirectory()?ut(g,Vt.join(E,Vt.basename(g.name)),C):ut(g,E,C)})},this.close=function(g){f||!t?(f=!0,g&&g()):(f=!0,Se.close(t,E=>{t=null,g&&g(E)}))};let Ar=zo.EventEmitter.prototype.emit;this.emit=function(...g){if(!f)return Ar.call(this,...g)}};it.setFs=function(n){Se=n};it.debugLog=(...n)=>{it.debug&&console.log(...n)};sd.inherits(it,zo.EventEmitter);var tt=Symbol("zip");it.async=class extends zo.EventEmitter{constructor(t){super();let o=new it(t);o.on("entry",i=>this.emit("entry",i)),o.on("extract",(i,a)=>this.emit("extract",i,a)),this[tt]=new Promise((i,a)=>{o.on("ready",()=>{o.removeListener("error",a),i(o)}),o.on("error",a)})}get entriesCount(){return this[tt].then(t=>t.entriesCount)}get comment(){return this[tt].then(t=>t.comment)}async entry(t){return(await this[tt]).entry(t)}async entries(){return(await this[tt]).entries()}async stream(t){let o=await this[tt];return new Promise((i,a)=>{o.stream(t,(l,f)=>{l?a(l):i(f)})})}async entryData(t){let o=await this.stream(t);return new Promise((i,a)=>{let l=[];o.on("data",f=>l.push(f)),o.on("end",()=>{i(Buffer.concat(l))}),o.on("error",f=>{o.removeAllListeners("end"),a(f)})})}async extract(t,o){let i=await this[tt];return new Promise((a,l)=>{i.extract(t,o,(f,b)=>{f?l(f):a(b)})})}async close(){let t=await this[tt];return new Promise((o,i)=>{t.close(a=>{a?i(a):o()})})}};var No=class{read(t){if(t.length!==_.ENDHDR||t.readUInt32LE(0)!==_.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=t.readUInt16LE(_.ENDSUB),this.totalEntries=t.readUInt16LE(_.ENDTOT),this.size=t.readUInt32LE(_.ENDSIZ),this.offset=t.readUInt32LE(_.ENDOFF),this.commentLength=t.readUInt16LE(_.ENDCOM)}},Bo=class{read(t){if(t.length!==_.ENDL64HDR||t.readUInt32LE(0)!==_.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=nt(t,_.ENDSUB)}},Fo=class{read(t){if(t.length!==_.END64HDR||t.readUInt32LE(0)!==_.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=nt(t,_.END64SUB),this.totalEntries=nt(t,_.END64TOT),this.size=nt(t,_.END64SIZ),this.offset=nt(t,_.END64OFF)}},Mo=class{readHeader(t,o){if(t.length<o+_.CENHDR||t.readUInt32LE(o)!==_.CENSIG)throw new Error("Invalid entry header");this.verMade=t.readUInt16LE(o+_.CENVEM),this.version=t.readUInt16LE(o+_.CENVER),this.flags=t.readUInt16LE(o+_.CENFLG),this.method=t.readUInt16LE(o+_.CENHOW);let i=t.readUInt16LE(o+_.CENTIM),a=t.readUInt16LE(o+_.CENTIM+2);this.time=Xa(i,a),this.crc=t.readUInt32LE(o+_.CENCRC),this.compressedSize=t.readUInt32LE(o+_.CENSIZ),this.size=t.readUInt32LE(o+_.CENLEN),this.fnameLen=t.readUInt16LE(o+_.CENNAM),this.extraLen=t.readUInt16LE(o+_.CENEXT),this.comLen=t.readUInt16LE(o+_.CENCOM),this.diskStart=t.readUInt16LE(o+_.CENDSK),this.inattr=t.readUInt16LE(o+_.CENATT),this.attr=t.readUInt32LE(o+_.CENATX),this.offset=t.readUInt32LE(o+_.CENOFF)}readDataHeader(t){if(t.readUInt32LE(0)!==_.LOCSIG)throw new Error("Invalid local header");this.version=t.readUInt16LE(_.LOCVER),this.flags=t.readUInt16LE(_.LOCFLG),this.method=t.readUInt16LE(_.LOCHOW);let o=t.readUInt16LE(_.LOCTIM),i=t.readUInt16LE(_.LOCTIM+2);this.time=Xa(o,i),this.crc=t.readUInt32LE(_.LOCCRC)||this.crc;let a=t.readUInt32LE(_.LOCSIZ);a&&a!==_.EF_ZIP64_OR_32&&(this.compressedSize=a);let l=t.readUInt32LE(_.LOCLEN);l&&l!==_.EF_ZIP64_OR_32&&(this.size=l),this.fnameLen=t.readUInt16LE(_.LOCNAM),this.extraLen=t.readUInt16LE(_.LOCEXT)}read(t,o,i){let a=t.slice(o,o+=this.fnameLen);this.name=i?i.decode(new Uint8Array(a)):a.toString("utf8");let l=t[o-1];this.isDirectory=l===47||l===92,this.extraLen&&(this.readExtra(t,o),o+=this.extraLen),this.comment=this.comLen?t.slice(o,o+this.comLen).toString():null}validateName(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name))throw new Error("Malicious entry: "+this.name)}readExtra(t,o){let i,a,l=o+this.extraLen;for(;o<l;)i=t.readUInt16LE(o),o+=2,a=t.readUInt16LE(o),o+=2,_.ID_ZIP64===i&&this.parseZip64Extra(t,o,a),o+=a}parseZip64Extra(t,o,i){i>=8&&this.size===_.EF_ZIP64_OR_32&&(this.size=nt(t,o),o+=8,i-=8),i>=8&&this.compressedSize===_.EF_ZIP64_OR_32&&(this.compressedSize=nt(t,o),o+=8,i-=8),i>=8&&this.offset===_.EF_ZIP64_OR_32&&(this.offset=nt(t,o),o+=8,i-=8),i>=4&&this.diskStart===_.EF_ZIP64_OR_16&&(this.diskStart=t.readUInt32LE(o))}get encrypted(){return(this.flags&_.FLG_ENTRY_ENC)===_.FLG_ENTRY_ENC}get isFile(){return!this.isDirectory}},rt=class{constructor(t,o,i,a,l,f){this.fd=t,this.buffer=o,this.offset=i,this.length=a,this.position=l,this.callback=f,this.bytesRead=0,this.waiting=!1}read(t){it.debugLog("read",this.position,this.bytesRead,this.length,this.offset),this.waiting=!0;let o;if(t){let i=0;try{i=Se.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(a){o=a}this.readCallback(t,o,o?i:null)}else Se.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,t))}readCallback(t,o,i){if(typeof i=="number"&&(this.bytesRead+=i),o||!i||this.bytesRead===this.length)return this.waiting=!1,this.callback(o,this.bytesRead);this.read(t)}},gn=class{constructor(t){this.position=0,this.buffer=Buffer.alloc(0),this.fd=t,this.fsOp=null}checkOp(){if(this.fsOp&&this.fsOp.waiting)throw new Error("Operation in progress")}read(t,o,i){this.checkOp(),this.buffer.length<o&&(this.buffer=Buffer.alloc(o)),this.position=t,this.fsOp=new rt(this.fd,this.buffer,0,o,this.position,i).read()}expandLeft(t,o){this.checkOp(),this.buffer=Buffer.concat([Buffer.alloc(t),this.buffer]),this.position-=t,this.position<0&&(this.position=0),this.fsOp=new rt(this.fd,this.buffer,0,t,this.position,o).read()}expandRight(t,o){this.checkOp();let i=this.buffer.length;this.buffer=Buffer.concat([this.buffer,Buffer.alloc(t)]),this.fsOp=new rt(this.fd,this.buffer,i,t,this.position+i,o).read()}moveRight(t,o,i){this.checkOp(),i?this.buffer.copy(this.buffer,0,i):i=0,this.position+=i,this.fsOp=new rt(this.fd,this.buffer,this.buffer.length-i,i,this.position+this.buffer.length-i,o).read()}},Uo=class extends el.Readable{constructor(t,o,i){super(),this.fd=t,this.offset=o,this.length=i,this.pos=0,this.readCallback=this.readCallback.bind(this)}_read(t){let o=Buffer.alloc(Math.min(t,this.length-this.pos));o.length?Se.read(this.fd,o,0,o.length,this.offset+this.pos,this.readCallback):this.push(null)}readCallback(t,o,i){this.pos+=o,t?(this.emit("error",t),this.push(null)):o?(o!==i.length&&(i=i.slice(0,o)),this.push(i)):this.push(null)}},Wo=class extends el.Transform{constructor(t,o,i){super(),this.verify=new ot(o,i),t.on("error",a=>{this.emit("error",a)})}_transform(t,o,i){let a;try{this.verify.data(t)}catch(l){a=l}i(a,t)}},ot=class{constructor(t,o){this.crc=t,this.size=o,this.state={crc:-1,size:0}}data(t){let o=ot.getCrcTable(),i=this.state.crc,a=0,l=t.length;for(;--l>=0;)i=o[(i^t[a++])&255]^i>>>8;if(this.state.crc=i,this.state.size+=t.length,this.state.size>=this.size){let f=Buffer.alloc(4);if(f.writeInt32LE(~this.state.crc&4294967295,0),i=f.readUInt32LE(0),i!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}}static getCrcTable(){let t=ot.crcTable;if(!t){ot.crcTable=t=[];let o=Buffer.alloc(4);for(let i=0;i<256;i++){let a=i;for(let l=8;--l>=0;)a&1?a=3988292384^a>>>1:a=a>>>1;a<0&&(o.writeInt32LE(a,0),a=o.readUInt32LE(0)),t[i]=a}}return t}};function Xa(n,t){let o=Ja(n,16),i=Ja(t,16),a={h:parseInt(o.slice(0,5).join(""),2),m:parseInt(o.slice(5,11).join(""),2),s:parseInt(o.slice(11,16).join(""),2)*2,Y:parseInt(i.slice(0,7).join(""),2)+1980,M:parseInt(i.slice(7,11).join(""),2),D:parseInt(i.slice(11,16).join(""),2)},l=[a.Y,a.M,a.D].join("-")+" "+[a.h,a.m,a.s].join(":")+" GMT+0";return new Date(l).getTime()}function Ja(n,t){let o=(n>>>0).toString(2);for(;o.length<t;)o="0"+o;return o.split("")}function nt(n,t){return n.readUInt32LE(t+4)*4294967296+n.readUInt32LE(t)}tl.exports=it});var ml=Q((wn,hl)=>{(function(n,t){typeof wn=="object"&&typeof hl<"u"?t(wn):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.WebStreamsPolyfill={}))})(wn,function(n){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(e){return typeof e=="object"&&e!==null||typeof e=="function"}let a=o;function l(e,r){try{Object.defineProperty(e,"name",{value:r,configurable:!0})}catch{}}let f=Promise,b=Promise.prototype.then,p=Promise.reject.bind(f);function m(e){return new f(e)}function y(e){return m(r=>r(e))}function S(e){return p(e)}function v(e,r,s){return b.call(e,r,s)}function A(e,r,s){v(v(e,r,s),void 0,a)}function w(e,r){A(e,r)}function W(e,r){A(e,void 0,r)}function x(e,r,s){return v(e,r,s)}function k(e){v(e,void 0,a)}let z=e=>{if(typeof queueMicrotask=="function")z=queueMicrotask;else{let r=y(void 0);z=s=>v(r,s)}return z(e)};function Z(e,r,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,s)}function D(e,r,s){try{return y(Z(e,r,s))}catch(u){return S(u)}}let H=16384;class N{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(r){let s=this._back,u=s;s._elements.length===H-1&&(u={_elements:[],_next:void 0}),s._elements.push(r),u!==s&&(this._back=u,s._next=u),++this._size}shift(){let r=this._front,s=r,u=this._cursor,c=u+1,d=r._elements,h=d[u];return c===H&&(s=r._next,c=0),--this._size,this._cursor=c,r!==s&&(this._front=s),d[u]=void 0,h}forEach(r){let s=this._cursor,u=this._front,c=u._elements;for(;(s!==c.length||u._next!==void 0)&&!(s===c.length&&(u=u._next,c=u._elements,s=0,c.length===0));)r(c[s]),++s}peek(){let r=this._front,s=this._cursor;return r._elements[s]}}let se=t("[[AbortSteps]]"),lt=t("[[ErrorSteps]]"),ut=t("[[CancelSteps]]"),It=t("[[PullSteps]]"),ct=t("[[ReleaseSteps]]");function Ar(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?T(e):r._state==="closed"?F(e):U(e,r._storedError)}function g(e,r){let s=e._ownerReadableStream;return Ee(s,r)}function E(e){let r=e._ownerReadableStream;r._state==="readable"?G(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Y(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),r._readableStreamController[ct](),r._reader=void 0,e._ownerReadableStream=void 0}function C(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function T(e){e._closedPromise=m((r,s)=>{e._closedPromise_resolve=r,e._closedPromise_reject=s})}function U(e,r){T(e),G(e,r)}function F(e){T(e),ae(e)}function G(e,r){e._closedPromise_reject!==void 0&&(k(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Y(e,r){U(e,r)}function ae(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Xt=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Pe=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ft(e){return typeof e=="object"||typeof e=="function"}function Ie(e,r){if(e!==void 0&&!ft(e))throw new TypeError(`${r} is not an object.`)}function be(e,r){if(typeof e!="function")throw new TypeError(`${r} is not a function.`)}function eu(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Xo(e,r){if(!eu(e))throw new TypeError(`${r} is not an object.`)}function Le(e,r,s){if(e===void 0)throw new TypeError(`Parameter ${r} is required in '${s}'.`)}function kn(e,r,s){if(e===void 0)throw new TypeError(`${r} is required in '${s}'.`)}function Nn(e){return Number(e)}function Jo(e){return e===0?0:e}function tu(e){return Jo(Pe(e))}function Bn(e,r){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=Jo(c),!Xt(c))throw new TypeError(`${r} is not a finite number`);if(c=tu(c),c<0||c>u)throw new TypeError(`${r} is outside the accepted range of 0 to ${u}, inclusive`);return!Xt(c)||c===0?0:c}function Fn(e,r){if(!Ke(e))throw new TypeError(`${r} is not a ReadableStream.`)}function At(e){return new $e(e)}function ei(e,r){e._reader._readRequests.push(r)}function Mn(e,r,s){let c=e._reader._readRequests.shift();s?c._closeSteps():c._chunkSteps(r)}function vr(e){return e._reader._readRequests.length}function ti(e){let r=e._reader;return!(r===void 0||!He(r))}class $e{constructor(r){if(Le(r,1,"ReadableStreamDefaultReader"),Fn(r,"First parameter"),Ze(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ar(this,r),this._readRequests=new N}get closed(){return He(this)?this._closedPromise:S(Or("closed"))}cancel(r=void 0){return He(this)?this._ownerReadableStream===void 0?S(C("cancel")):g(this,r):S(Or("cancel"))}read(){if(!He(this))return S(Or("read"));if(this._ownerReadableStream===void 0)return S(C("read from"));let r,s,u=m((d,h)=>{r=d,s=h});return Jt(this,{_chunkSteps:d=>r({value:d,done:!1}),_closeSteps:()=>r({value:void 0,done:!0}),_errorSteps:d=>s(d)}),u}releaseLock(){if(!He(this))throw Or("releaseLock");this._ownerReadableStream!==void 0&&ru(this)}}Object.defineProperties($e.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),l($e.prototype.cancel,"cancel"),l($e.prototype.read,"read"),l($e.prototype.releaseLock,"releaseLock"),typeof t.toStringTag=="symbol"&&Object.defineProperty($e.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function He(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof $e}function Jt(e,r){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?r._closeSteps():s._state==="errored"?r._errorSteps(s._storedError):s._readableStreamController[It](r)}function ru(e){E(e);let r=new TypeError("Reader was released");ri(e,r)}function ri(e,r){let s=e._readRequests;e._readRequests=new N,s.forEach(u=>{u._errorSteps(r)})}function Or(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ni=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class oi{constructor(r,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=s}next(){let r=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?x(this._ongoingPromise,r,r):r(),this._ongoingPromise}return(r){let s=()=>this._returnSteps(r);return this._ongoingPromise?x(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader,s,u,c=m((h,R)=>{s=h,u=R});return Jt(r,{_chunkSteps:h=>{this._ongoingPromise=void 0,z(()=>s({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,E(r),s({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,E(r),u(h)}}),c}_returnSteps(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;let s=this._reader;if(!this._preventCancel){let u=g(s,r);return E(s),x(u,()=>({value:r,done:!0}))}return E(s),y({value:r,done:!0})}}let ii={next(){return si(this)?this._asyncIteratorImpl.next():S(ai("next"))},return(e){return si(this)?this._asyncIteratorImpl.return(e):S(ai("return"))}};ni!==void 0&&Object.setPrototypeOf(ii,ni);function nu(e,r){let s=At(e),u=new oi(s,r),c=Object.create(ii);return c._asyncIteratorImpl=u,c}function si(e){if(!i(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof oi}catch{return!1}}function ai(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let li=Number.isNaN||function(e){return e!==e};function er(e){return e.slice()}function ui(e,r,s,u,c){new Uint8Array(e).set(new Uint8Array(s,u,c),r)}let De=e=>(typeof e.transfer=="function"?De=r=>r.transfer():typeof structuredClone=="function"?De=r=>structuredClone(r,{transfer:[r]}):De=r=>r,De(e)),Ge=e=>(typeof e.detached=="boolean"?Ge=r=>r.detached:Ge=r=>r.byteLength===0,Ge(e));function ci(e,r,s){if(e.slice)return e.slice(r,s);let u=s-r,c=new ArrayBuffer(u);return ui(c,0,e,r,u),c}function xr(e,r){let s=e[r];if(s!=null){if(typeof s!="function")throw new TypeError(`${String(r)} is not a function`);return s}}function ou(e){let r={[t.iterator]:()=>e.iterator},s=async function*(){return yield*r}(),u=s.next;return{iterator:s,nextMethod:u,done:!1}}function fi(e,r="sync",s){if(s===void 0)if(r==="async"){if(s=xr(e,t.asyncIterator),s===void 0){let d=xr(e,t.iterator),h=fi(e,"sync",d);return ou(h)}}else s=xr(e,t.iterator);if(s===void 0)throw new TypeError("The object is not iterable");let u=Z(s,e,[]);if(!i(u))throw new TypeError("The iterator method must return an object");let c=u.next;return{iterator:u,nextMethod:c,done:!1}}function iu(e){let r=Z(e.nextMethod,e.iterator,[]);if(!i(r))throw new TypeError("The iterator.next() method must return an object");return r}function su(e){return!!e.done}function au(e){return e.value}function lu(e){return!(typeof e!="number"||li(e)||e<0)}function di(e){let r=ci(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function Un(e){let r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function Wn(e,r,s){if(!lu(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:s}),e._queueTotalSize+=s}function uu(e){return e._queue.peek().value}function Ve(e){e._queue=new N,e._queueTotalSize=0}function hi(e){return e===DataView}function cu(e){return hi(e.constructor)}function fu(e){return hi(e)?1:e.BYTES_PER_ELEMENT}class dt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!zn(this))throw Gn("view");return this._view}respond(r){if(!zn(this))throw Gn("respond");if(Le(r,1,"respond"),r=Bn(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ge(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Nr(this._associatedReadableByteStreamController,r)}respondWithNewView(r){if(!zn(this))throw Gn("respondWithNewView");if(Le(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ge(r.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Br(this._associatedReadableByteStreamController,r)}}Object.defineProperties(dt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),l(dt.prototype.respond,"respond"),l(dt.prototype.respondWithNewView,"respondWithNewView"),typeof t.toStringTag=="symbol"&&Object.defineProperty(dt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ke{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ht(this))throw rr("byobRequest");return Hn(this)}get desiredSize(){if(!ht(this))throw rr("desiredSize");return Ri(this)}close(){if(!ht(this))throw rr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be closed`);tr(this)}enqueue(r){if(!ht(this))throw rr("enqueue");if(Le(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);kr(this,r)}error(r=void 0){if(!ht(this))throw rr("error");ye(this,r)}[ut](r){mi(this),Ve(this);let s=this._cancelAlgorithm(r);return Dr(this),s}[It](r){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){Ei(this,r);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(h){r._errorSteps(h);return}let d={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}ei(s,r),mt(this)}[ct](){if(this._pendingPullIntos.length>0){let r=this._pendingPullIntos.peek();r.readerType="none",this._pendingPullIntos=new N,this._pendingPullIntos.push(r)}}}Object.defineProperties(ke.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),l(ke.prototype.close,"close"),l(ke.prototype.enqueue,"enqueue"),l(ke.prototype.error,"error"),typeof t.toStringTag=="symbol"&&Object.defineProperty(ke.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ht(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof ke}function zn(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof dt}function mt(e){if(!bu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();A(s,()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,mt(e)),null),u=>(ye(e,u),null))}function mi(e){jn(e),e._pendingPullIntos=new N}function qn(e,r){let s=!1;e._state==="closed"&&(s=!0);let u=pi(r);r.readerType==="default"?Mn(e,u,s):Eu(e,u,s)}function pi(e){let r=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/s)}function Lr(e,r,s,u){e._queue.push({buffer:r,byteOffset:s,byteLength:u}),e._queueTotalSize+=u}function bi(e,r,s,u){let c;try{c=ci(r,s,s+u)}catch(d){throw ye(e,d),d}Lr(e,c,0,u)}function yi(e,r){r.bytesFilled>0&&bi(e,r.buffer,r.byteOffset,r.bytesFilled),vt(e)}function gi(e,r){let s=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),u=r.bytesFilled+s,c=s,d=!1,h=u%r.elementSize,R=u-h;R>=r.minimumFill&&(c=R-r.bytesFilled,d=!0);let O=e._queue;for(;c>0;){let P=O.peek(),L=Math.min(c,P.byteLength),B=r.byteOffset+r.bytesFilled;ui(r.buffer,B,P.buffer,P.byteOffset,L),P.byteLength===L?O.shift():(P.byteOffset+=L,P.byteLength-=L),e._queueTotalSize-=L,Si(e,L,r),c-=L}return d}function Si(e,r,s){s.bytesFilled+=r}function wi(e){e._queueTotalSize===0&&e._closeRequested?(Dr(e),lr(e._controlledReadableByteStream)):mt(e)}function jn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function $n(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let r=e._pendingPullIntos.peek();gi(e,r)&&(vt(e),qn(e._controlledReadableByteStream,r))}}function du(e){let r=e._controlledReadableByteStream._reader;for(;r._readRequests.length>0;){if(e._queueTotalSize===0)return;let s=r._readRequests.shift();Ei(e,s)}}function hu(e,r,s,u){let c=e._controlledReadableByteStream,d=r.constructor,h=fu(d),{byteOffset:R,byteLength:O}=r,P=s*h,L;try{L=De(r.buffer)}catch(q){u._errorSteps(q);return}let B={buffer:L,bufferByteLength:L.byteLength,byteOffset:R,byteLength:O,bytesFilled:0,minimumFill:P,elementSize:h,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(B),Pi(c,u);return}if(c._state==="closed"){let q=new d(B.buffer,B.byteOffset,0);u._closeSteps(q);return}if(e._queueTotalSize>0){if(gi(e,B)){let q=pi(B);wi(e),u._chunkSteps(q);return}if(e._closeRequested){let q=new TypeError("Insufficient bytes to fill elements in the given buffer");ye(e,q),u._errorSteps(q);return}}e._pendingPullIntos.push(B),Pi(c,u),mt(e)}function mu(e,r){r.readerType==="none"&&vt(e);let s=e._controlledReadableByteStream;if(Vn(s))for(;Ii(s)>0;){let u=vt(e);qn(s,u)}}function pu(e,r,s){if(Si(e,r,s),s.readerType==="none"){yi(e,s),$n(e);return}if(s.bytesFilled<s.minimumFill)return;vt(e);let u=s.bytesFilled%s.elementSize;if(u>0){let c=s.byteOffset+s.bytesFilled;bi(e,s.buffer,c-u,u)}s.bytesFilled-=u,qn(e._controlledReadableByteStream,s),$n(e)}function _i(e,r){let s=e._pendingPullIntos.peek();jn(e),e._controlledReadableByteStream._state==="closed"?mu(e,s):pu(e,r,s),mt(e)}function vt(e){return e._pendingPullIntos.shift()}function bu(e){let r=e._controlledReadableByteStream;return r._state!=="readable"||e._closeRequested||!e._started?!1:!!(ti(r)&&vr(r)>0||Vn(r)&&Ii(r)>0||Ri(e)>0)}function Dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function tr(e){let r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){let s=e._pendingPullIntos.peek();if(s.bytesFilled%s.elementSize!==0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ye(e,u),u}}Dr(e),lr(r)}}function kr(e,r){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let{buffer:u,byteOffset:c,byteLength:d}=r;if(Ge(u))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let h=De(u);if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();if(Ge(R.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");jn(e),R.buffer=De(R.buffer),R.readerType==="none"&&yi(e,R)}if(ti(s))if(du(e),vr(s)===0)Lr(e,h,c,d);else{e._pendingPullIntos.length>0&&vt(e);let R=new Uint8Array(h,c,d);Mn(s,R,!1)}else Vn(s)?(Lr(e,h,c,d),$n(e)):Lr(e,h,c,d);mt(e)}function ye(e,r){let s=e._controlledReadableByteStream;s._state==="readable"&&(mi(e),Ve(e),Dr(e),Zi(s,r))}function Ei(e,r){let s=e._queue.shift();e._queueTotalSize-=s.byteLength,wi(e);let u=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);r._chunkSteps(u)}function Hn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let r=e._pendingPullIntos.peek(),s=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),u=Object.create(dt.prototype);gu(u,e,s),e._byobRequest=u}return e._byobRequest}function Ri(e){let r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function Nr(e,r){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+r>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=De(s.buffer),_i(e,r)}function Br(e,r){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+r.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=r.byteLength;s.buffer=De(r.buffer),_i(e,c)}function Ti(e,r,s,u,c,d,h){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,Ve(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=d,r._pullAlgorithm=u,r._cancelAlgorithm=c,r._autoAllocateChunkSize=h,r._pendingPullIntos=new N,e._readableStreamController=r;let R=s();A(y(R),()=>(r._started=!0,mt(r),null),O=>(ye(r,O),null))}function yu(e,r,s){let u=Object.create(ke.prototype),c,d,h;r.start!==void 0?c=()=>r.start(u):c=()=>{},r.pull!==void 0?d=()=>r.pull(u):d=()=>y(void 0),r.cancel!==void 0?h=O=>r.cancel(O):h=()=>y(void 0);let R=r.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ti(e,u,c,d,h,s,R)}function gu(e,r,s){e._associatedReadableByteStreamController=r,e._view=s}function Gn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function rr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Su(e,r){Ie(e,r);let s=e?.mode;return{mode:s===void 0?void 0:wu(s,`${r} has member 'mode' that`)}}function wu(e,r){if(e=`${e}`,e!=="byob")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function _u(e,r){var s;Ie(e,r);let u=(s=e?.min)!==null&&s!==void 0?s:1;return{min:Bn(u,`${r} has member 'min' that`)}}function Ci(e){return new Ye(e)}function Pi(e,r){e._reader._readIntoRequests.push(r)}function Eu(e,r,s){let c=e._reader._readIntoRequests.shift();s?c._closeSteps(r):c._chunkSteps(r)}function Ii(e){return e._reader._readIntoRequests.length}function Vn(e){let r=e._reader;return!(r===void 0||!pt(r))}class Ye{constructor(r){if(Le(r,1,"ReadableStreamBYOBReader"),Fn(r,"First parameter"),Ze(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ht(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Ar(this,r),this._readIntoRequests=new N}get closed(){return pt(this)?this._closedPromise:S(Fr("closed"))}cancel(r=void 0){return pt(this)?this._ownerReadableStream===void 0?S(C("cancel")):g(this,r):S(Fr("cancel"))}read(r,s={}){if(!pt(this))return S(Fr("read"));if(!ArrayBuffer.isView(r))return S(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return S(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return S(new TypeError("view's buffer must have non-zero byteLength"));if(Ge(r.buffer))return S(new TypeError("view's buffer has been detached"));let u;try{u=_u(s,"options")}catch(P){return S(P)}let c=u.min;if(c===0)return S(new TypeError("options.min must be greater than 0"));if(cu(r)){if(c>r.byteLength)return S(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(c>r.length)return S(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return S(C("read from"));let d,h,R=m((P,L)=>{d=P,h=L});return Ai(this,r,c,{_chunkSteps:P=>d({value:P,done:!1}),_closeSteps:P=>d({value:P,done:!0}),_errorSteps:P=>h(P)}),R}releaseLock(){if(!pt(this))throw Fr("releaseLock");this._ownerReadableStream!==void 0&&Ru(this)}}Object.defineProperties(Ye.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),l(Ye.prototype.cancel,"cancel"),l(Ye.prototype.read,"read"),l(Ye.prototype.releaseLock,"releaseLock"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ye.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function pt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ye}function Ai(e,r,s,u){let c=e._ownerReadableStream;c._disturbed=!0,c._state==="errored"?u._errorSteps(c._storedError):hu(c._readableStreamController,r,s,u)}function Ru(e){E(e);let r=new TypeError("Reader was released");vi(e,r)}function vi(e,r){let s=e._readIntoRequests;e._readIntoRequests=new N,s.forEach(u=>{u._errorSteps(r)})}function Fr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function nr(e,r){let{highWaterMark:s}=e;if(s===void 0)return r;if(li(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function Mr(e){let{size:r}=e;return r||(()=>1)}function Ur(e,r){Ie(e,r);let s=e?.highWaterMark,u=e?.size;return{highWaterMark:s===void 0?void 0:Nn(s),size:u===void 0?void 0:Tu(u,`${r} has member 'size' that`)}}function Tu(e,r){return be(e,r),s=>Nn(e(s))}function Cu(e,r){Ie(e,r);let s=e?.abort,u=e?.close,c=e?.start,d=e?.type,h=e?.write;return{abort:s===void 0?void 0:Pu(s,e,`${r} has member 'abort' that`),close:u===void 0?void 0:Iu(u,e,`${r} has member 'close' that`),start:c===void 0?void 0:Au(c,e,`${r} has member 'start' that`),write:h===void 0?void 0:vu(h,e,`${r} has member 'write' that`),type:d}}function Pu(e,r,s){return be(e,s),u=>D(e,r,[u])}function Iu(e,r,s){return be(e,s),()=>D(e,r,[])}function Au(e,r,s){return be(e,s),u=>Z(e,r,[u])}function vu(e,r,s){return be(e,s),(u,c)=>D(e,r,[u,c])}function Oi(e,r){if(!Ot(e))throw new TypeError(`${r} is not a WritableStream.`)}function Ou(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let xu=typeof AbortController=="function";function Lu(){if(xu)return new AbortController}class Qe{constructor(r={},s={}){r===void 0?r=null:Xo(r,"First parameter");let u=Ur(s,"Second parameter"),c=Cu(r,"First parameter");if(Li(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=Mr(u),R=nr(u,1);Gu(this,c,R,h)}get locked(){if(!Ot(this))throw $r("locked");return xt(this)}abort(r=void 0){return Ot(this)?xt(this)?S(new TypeError("Cannot abort a stream that already has a writer")):Wr(this,r):S($r("abort"))}close(){return Ot(this)?xt(this)?S(new TypeError("Cannot close a stream that already has a writer")):Ae(this)?S(new TypeError("Cannot close an already-closing stream")):Di(this):S($r("close"))}getWriter(){if(!Ot(this))throw $r("getWriter");return xi(this)}}Object.defineProperties(Qe.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),l(Qe.prototype.abort,"abort"),l(Qe.prototype.close,"close"),l(Qe.prototype.getWriter,"getWriter"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function xi(e){return new Ne(e)}function Du(e,r,s,u,c=1,d=()=>1){let h=Object.create(Qe.prototype);Li(h);let R=Object.create(Lt.prototype);return Ui(h,R,e,r,s,u,c,d),h}function Li(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new N,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ot(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Qe}function xt(e){return e._writer!==void 0}function Wr(e,r){var s;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=r,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort(r);let u=e._state;if(u==="closed"||u==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,r=void 0);let d=m((h,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:R,_reason:r,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||Qn(e,r),d}function Di(e){let r=e._state;if(r==="closed"||r==="errored")return S(new TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let s=m((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&r==="writable"&&no(u),Vu(e._writableStreamController),s}function ku(e){return m((s,u)=>{let c={_resolve:s,_reject:u};e._writeRequests.push(c)})}function Yn(e,r){if(e._state==="writable"){Qn(e,r);return}Kn(e)}function Qn(e,r){let s=e._writableStreamController;e._state="erroring",e._storedError=r;let u=e._writer;u!==void 0&&Ni(u,r),!Uu(e)&&s._started&&Kn(e)}function Kn(e){e._state="errored",e._writableStreamController[lt]();let r=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(r)}),e._writeRequests=new N,e._pendingAbortRequest===void 0){zr(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(r),zr(e);return}let u=e._writableStreamController[se](s._reason);A(u,()=>(s._resolve(),zr(e),null),c=>(s._reject(c),zr(e),null))}function Nu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Bu(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,Yn(e,r)}function Fu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&ji(s)}function Mu(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),Yn(e,r)}function Ae(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Uu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Wu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function zu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function zr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let r=e._writer;r!==void 0&&to(r,e._storedError)}function Zn(e,r){let s=e._writer;s!==void 0&&r!==e._backpressure&&(r?ec(s):no(s)),e._backpressure=r}class Ne{constructor(r){if(Le(r,1,"WritableStreamDefaultWriter"),Oi(r,"First parameter"),xt(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;let s=r._state;if(s==="writable")!Ae(r)&&r._backpressure?Gr(this):$i(this),Hr(this);else if(s==="erroring")ro(this,r._storedError),Hr(this);else if(s==="closed")$i(this),Xu(this);else{let u=r._storedError;ro(this,u),qi(this,u)}}get closed(){return bt(this)?this._closedPromise:S(yt("closed"))}get desiredSize(){if(!bt(this))throw yt("desiredSize");if(this._ownerWritableStream===void 0)throw ir("desiredSize");return Hu(this)}get ready(){return bt(this)?this._readyPromise:S(yt("ready"))}abort(r=void 0){return bt(this)?this._ownerWritableStream===void 0?S(ir("abort")):qu(this,r):S(yt("abort"))}close(){if(!bt(this))return S(yt("close"));let r=this._ownerWritableStream;return r===void 0?S(ir("close")):Ae(r)?S(new TypeError("Cannot close an already-closing stream")):ki(this)}releaseLock(){if(!bt(this))throw yt("releaseLock");this._ownerWritableStream!==void 0&&Bi(this)}write(r=void 0){return bt(this)?this._ownerWritableStream===void 0?S(ir("write to")):Fi(this,r):S(yt("write"))}}Object.defineProperties(Ne.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),l(Ne.prototype.abort,"abort"),l(Ne.prototype.close,"close"),l(Ne.prototype.releaseLock,"releaseLock"),l(Ne.prototype.write,"write"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ne.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function bt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Ne}function qu(e,r){let s=e._ownerWritableStream;return Wr(s,r)}function ki(e){let r=e._ownerWritableStream;return Di(r)}function ju(e){let r=e._ownerWritableStream,s=r._state;return Ae(r)||s==="closed"?y(void 0):s==="errored"?S(r._storedError):ki(e)}function $u(e,r){e._closedPromiseState==="pending"?to(e,r):Ju(e,r)}function Ni(e,r){e._readyPromiseState==="pending"?Hi(e,r):tc(e,r)}function Hu(e){let r=e._ownerWritableStream,s=r._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:Wi(r._writableStreamController)}function Bi(e){let r=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ni(e,s),$u(e,s),r._writer=void 0,e._ownerWritableStream=void 0}function Fi(e,r){let s=e._ownerWritableStream,u=s._writableStreamController,c=Yu(u,r);if(s!==e._ownerWritableStream)return S(ir("write to"));let d=s._state;if(d==="errored")return S(s._storedError);if(Ae(s)||d==="closed")return S(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return S(s._storedError);let h=ku(s);return Qu(u,r,c),h}let Mi={};class Lt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Xn(this))throw eo("abortReason");return this._abortReason}get signal(){if(!Xn(this))throw eo("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(r=void 0){if(!Xn(this))throw eo("error");this._controlledWritableStream._state==="writable"&&zi(this,r)}[se](r){let s=this._abortAlgorithm(r);return qr(this),s}[lt](){Ve(this)}}Object.defineProperties(Lt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Xn(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Lt}function Ui(e,r,s,u,c,d,h,R){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,Ve(r),r._abortReason=void 0,r._abortController=Lu(),r._started=!1,r._strategySizeAlgorithm=R,r._strategyHWM=h,r._writeAlgorithm=u,r._closeAlgorithm=c,r._abortAlgorithm=d;let O=Jn(r);Zn(e,O);let P=s(),L=y(P);A(L,()=>(r._started=!0,jr(r),null),B=>(r._started=!0,Yn(e,B),null))}function Gu(e,r,s,u){let c=Object.create(Lt.prototype),d,h,R,O;r.start!==void 0?d=()=>r.start(c):d=()=>{},r.write!==void 0?h=P=>r.write(P,c):h=()=>y(void 0),r.close!==void 0?R=()=>r.close():R=()=>y(void 0),r.abort!==void 0?O=P=>r.abort(P):O=()=>y(void 0),Ui(e,c,d,h,R,O,s,u)}function qr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Vu(e){Wn(e,Mi,0),jr(e)}function Yu(e,r){try{return e._strategySizeAlgorithm(r)}catch(s){return or(e,s),1}}function Wi(e){return e._strategyHWM-e._queueTotalSize}function Qu(e,r,s){try{Wn(e,r,s)}catch(c){or(e,c);return}let u=e._controlledWritableStream;if(!Ae(u)&&u._state==="writable"){let c=Jn(e);Zn(u,c)}jr(e)}function jr(e){let r=e._controlledWritableStream;if(!e._started||r._inFlightWriteRequest!==void 0)return;if(r._state==="erroring"){Kn(r);return}if(e._queue.length===0)return;let u=uu(e);u===Mi?Ku(e):Zu(e,u)}function or(e,r){e._controlledWritableStream._state==="writable"&&zi(e,r)}function Ku(e){let r=e._controlledWritableStream;Wu(r),Un(e);let s=e._closeAlgorithm();qr(e),A(s,()=>(Fu(r),null),u=>(Mu(r,u),null))}function Zu(e,r){let s=e._controlledWritableStream;zu(s);let u=e._writeAlgorithm(r);A(u,()=>{Nu(s);let c=s._state;if(Un(e),!Ae(s)&&c==="writable"){let d=Jn(e);Zn(s,d)}return jr(e),null},c=>(s._state==="writable"&&qr(e),Bu(s,c),null))}function Jn(e){return Wi(e)<=0}function zi(e,r){let s=e._controlledWritableStream;qr(e),Qn(s,r)}function $r(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function eo(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function yt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function ir(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Hr(e){e._closedPromise=m((r,s)=>{e._closedPromise_resolve=r,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function qi(e,r){Hr(e),to(e,r)}function Xu(e){Hr(e),ji(e)}function to(e,r){e._closedPromise_reject!==void 0&&(k(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ju(e,r){qi(e,r)}function ji(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Gr(e){e._readyPromise=m((r,s)=>{e._readyPromise_resolve=r,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function ro(e,r){Gr(e),Hi(e,r)}function $i(e){Gr(e),no(e)}function Hi(e,r){e._readyPromise_reject!==void 0&&(k(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ec(e){Gr(e)}function tc(e,r){ro(e,r)}function no(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}function rc(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let oo=rc();function nc(e){if(!(typeof e=="function"||typeof e=="object")||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}}function oc(){let e=oo?.DOMException;return nc(e)?e:void 0}function ic(){let e=function(s,u){this.message=s||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return l(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let sc=oc()||ic();function Gi(e,r,s,u,c,d){let h=At(e),R=xi(r);e._disturbed=!0;let O=!1,P=y(void 0);return m((L,B)=>{let q;if(d!==void 0){if(q=()=>{let I=d.reason!==void 0?d.reason:new sc("Aborted","AbortError"),M=[];u||M.push(()=>r._state==="writable"?Wr(r,I):y(void 0)),c||M.push(()=>e._state==="readable"?Ee(e,I):y(void 0)),le(()=>Promise.all(M.map(j=>j())),!0,I)},d.aborted){q();return}d.addEventListener("abort",q)}function Re(){return m((I,M)=>{function j(de){de?I():v(Bt(),j,M)}j(!1)})}function Bt(){return O?y(!0):v(R._readyPromise,()=>m((I,M)=>{Jt(h,{_chunkSteps:j=>{P=v(Fi(R,j),void 0,o),I(!1)},_closeSteps:()=>I(!0),_errorSteps:M})}))}if(Fe(e,h._closedPromise,I=>(u?ge(!0,I):le(()=>Wr(r,I),!0,I),null)),Fe(r,R._closedPromise,I=>(c?ge(!0,I):le(()=>Ee(e,I),!0,I),null)),oe(e,h._closedPromise,()=>(s?ge():le(()=>ju(R)),null)),Ae(r)||r._state==="closed"){let I=new TypeError("the destination writable stream closed before all data could be piped to it");c?ge(!0,I):le(()=>Ee(e,I),!0,I)}k(Re());function Je(){let I=P;return v(P,()=>I!==P?Je():void 0)}function Fe(I,M,j){I._state==="errored"?j(I._storedError):W(M,j)}function oe(I,M,j){I._state==="closed"?j():w(M,j)}function le(I,M,j){if(O)return;O=!0,r._state==="writable"&&!Ae(r)?w(Je(),de):de();function de(){return A(I(),()=>Me(M,j),Ft=>Me(!0,Ft)),null}}function ge(I,M){O||(O=!0,r._state==="writable"&&!Ae(r)?w(Je(),()=>Me(I,M)):Me(I,M))}function Me(I,M){return Bi(R),E(h),d!==void 0&&d.removeEventListener("abort",q),I?B(M):L(void 0),null}})}class Be{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Vr(this))throw Qr("desiredSize");return io(this)}close(){if(!Vr(this))throw Qr("close");if(!kt(this))throw new TypeError("The stream is not in a state that permits close");gt(this)}enqueue(r=void 0){if(!Vr(this))throw Qr("enqueue");if(!kt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Dt(this,r)}error(r=void 0){if(!Vr(this))throw Qr("error");_e(this,r)}[ut](r){Ve(this);let s=this._cancelAlgorithm(r);return Yr(this),s}[It](r){let s=this._controlledReadableStream;if(this._queue.length>0){let u=Un(this);this._closeRequested&&this._queue.length===0?(Yr(this),lr(s)):sr(this),r._chunkSteps(u)}else ei(s,r),sr(this)}[ct](){}}Object.defineProperties(Be.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),l(Be.prototype.close,"close"),l(Be.prototype.enqueue,"enqueue"),l(Be.prototype.error,"error"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Vr(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Be}function sr(e){if(!Vi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();A(s,()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,sr(e)),null),u=>(_e(e,u),null))}function Vi(e){let r=e._controlledReadableStream;return!kt(e)||!e._started?!1:!!(Ze(r)&&vr(r)>0||io(e)>0)}function Yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function gt(e){if(!kt(e))return;let r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Yr(e),lr(r))}function Dt(e,r){if(!kt(e))return;let s=e._controlledReadableStream;if(Ze(s)&&vr(s)>0)Mn(s,r,!1);else{let u;try{u=e._strategySizeAlgorithm(r)}catch(c){throw _e(e,c),c}try{Wn(e,r,u)}catch(c){throw _e(e,c),c}}sr(e)}function _e(e,r){let s=e._controlledReadableStream;s._state==="readable"&&(Ve(e),Yr(e),Zi(s,r))}function io(e){let r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function ac(e){return!Vi(e)}function kt(e){let r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function Yi(e,r,s,u,c,d,h){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,Ve(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=h,r._strategyHWM=d,r._pullAlgorithm=u,r._cancelAlgorithm=c,e._readableStreamController=r;let R=s();A(y(R),()=>(r._started=!0,sr(r),null),O=>(_e(r,O),null))}function lc(e,r,s,u){let c=Object.create(Be.prototype),d,h,R;r.start!==void 0?d=()=>r.start(c):d=()=>{},r.pull!==void 0?h=()=>r.pull(c):h=()=>y(void 0),r.cancel!==void 0?R=O=>r.cancel(O):R=()=>y(void 0),Yi(e,c,d,h,R,s,u)}function Qr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function uc(e,r){return ht(e._readableStreamController)?fc(e):cc(e)}function cc(e,r){let s=At(e),u=!1,c=!1,d=!1,h=!1,R,O,P,L,B,q=m(oe=>{B=oe});function Re(){return u?(c=!0,y(void 0)):(u=!0,Jt(s,{_chunkSteps:le=>{z(()=>{c=!1;let ge=le,Me=le;d||Dt(P._readableStreamController,ge),h||Dt(L._readableStreamController,Me),u=!1,c&&Re()})},_closeSteps:()=>{u=!1,d||gt(P._readableStreamController),h||gt(L._readableStreamController),(!d||!h)&&B(void 0)},_errorSteps:()=>{u=!1}}),y(void 0))}function Bt(oe){if(d=!0,R=oe,h){let le=er([R,O]),ge=Ee(e,le);B(ge)}return q}function Je(oe){if(h=!0,O=oe,d){let le=er([R,O]),ge=Ee(e,le);B(ge)}return q}function Fe(){}return P=ar(Fe,Re,Bt),L=ar(Fe,Re,Je),W(s._closedPromise,oe=>(_e(P._readableStreamController,oe),_e(L._readableStreamController,oe),(!d||!h)&&B(void 0),null)),[P,L]}function fc(e){let r=At(e),s=!1,u=!1,c=!1,d=!1,h=!1,R,O,P,L,B,q=m(I=>{B=I});function Re(I){W(I._closedPromise,M=>(I!==r||(ye(P._readableStreamController,M),ye(L._readableStreamController,M),(!d||!h)&&B(void 0)),null))}function Bt(){pt(r)&&(E(r),r=At(e),Re(r)),Jt(r,{_chunkSteps:M=>{z(()=>{u=!1,c=!1;let j=M,de=M;if(!d&&!h)try{de=di(M)}catch(Ft){ye(P._readableStreamController,Ft),ye(L._readableStreamController,Ft),B(Ee(e,Ft));return}d||kr(P._readableStreamController,j),h||kr(L._readableStreamController,de),s=!1,u?Fe():c&&oe()})},_closeSteps:()=>{s=!1,d||tr(P._readableStreamController),h||tr(L._readableStreamController),P._readableStreamController._pendingPullIntos.length>0&&Nr(P._readableStreamController,0),L._readableStreamController._pendingPullIntos.length>0&&Nr(L._readableStreamController,0),(!d||!h)&&B(void 0)},_errorSteps:()=>{s=!1}})}function Je(I,M){He(r)&&(E(r),r=Ci(e),Re(r));let j=M?L:P,de=M?P:L;Ai(r,I,1,{_chunkSteps:Mt=>{z(()=>{u=!1,c=!1;let Ut=M?h:d;if(M?d:h)Ut||Br(j._readableStreamController,Mt);else{let cs;try{cs=di(Mt)}catch(co){ye(j._readableStreamController,co),ye(de._readableStreamController,co),B(Ee(e,co));return}Ut||Br(j._readableStreamController,Mt),kr(de._readableStreamController,cs)}s=!1,u?Fe():c&&oe()})},_closeSteps:Mt=>{s=!1;let Ut=M?h:d,nn=M?d:h;Ut||tr(j._readableStreamController),nn||tr(de._readableStreamController),Mt!==void 0&&(Ut||Br(j._readableStreamController,Mt),!nn&&de._readableStreamController._pendingPullIntos.length>0&&Nr(de._readableStreamController,0)),(!Ut||!nn)&&B(void 0)},_errorSteps:()=>{s=!1}})}function Fe(){if(s)return u=!0,y(void 0);s=!0;let I=Hn(P._readableStreamController);return I===null?Bt():Je(I._view,!1),y(void 0)}function oe(){if(s)return c=!0,y(void 0);s=!0;let I=Hn(L._readableStreamController);return I===null?Bt():Je(I._view,!0),y(void 0)}function le(I){if(d=!0,R=I,h){let M=er([R,O]),j=Ee(e,M);B(j)}return q}function ge(I){if(h=!0,O=I,d){let M=er([R,O]),j=Ee(e,M);B(j)}return q}function Me(){}return P=Ki(Me,Fe,le),L=Ki(Me,oe,ge),Re(r),[P,L]}function dc(e){return i(e)&&typeof e.getReader<"u"}function hc(e){return dc(e)?pc(e.getReader()):mc(e)}function mc(e){let r,s=fi(e,"async"),u=o;function c(){let h;try{h=iu(s)}catch(O){return S(O)}let R=y(h);return x(R,O=>{if(!i(O))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(su(O))gt(r._readableStreamController);else{let L=au(O);Dt(r._readableStreamController,L)}})}function d(h){let R=s.iterator,O;try{O=xr(R,"return")}catch(B){return S(B)}if(O===void 0)return y(void 0);let P;try{P=Z(O,R,[h])}catch(B){return S(B)}let L=y(P);return x(L,B=>{if(!i(B))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return r=ar(u,c,d,0),r}function pc(e){let r,s=o;function u(){let d;try{d=e.read()}catch(h){return S(h)}return x(d,h=>{if(!i(h))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(h.done)gt(r._readableStreamController);else{let R=h.value;Dt(r._readableStreamController,R)}})}function c(d){try{return y(e.cancel(d))}catch(h){return S(h)}}return r=ar(s,u,c,0),r}function bc(e,r){Ie(e,r);let s=e,u=s?.autoAllocateChunkSize,c=s?.cancel,d=s?.pull,h=s?.start,R=s?.type;return{autoAllocateChunkSize:u===void 0?void 0:Bn(u,`${r} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:yc(c,s,`${r} has member 'cancel' that`),pull:d===void 0?void 0:gc(d,s,`${r} has member 'pull' that`),start:h===void 0?void 0:Sc(h,s,`${r} has member 'start' that`),type:R===void 0?void 0:wc(R,`${r} has member 'type' that`)}}function yc(e,r,s){return be(e,s),u=>D(e,r,[u])}function gc(e,r,s){return be(e,s),u=>D(e,r,[u])}function Sc(e,r,s){return be(e,s),u=>Z(e,r,[u])}function wc(e,r){if(e=`${e}`,e!=="bytes")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function _c(e,r){return Ie(e,r),{preventCancel:!!e?.preventCancel}}function Qi(e,r){Ie(e,r);let s=e?.preventAbort,u=e?.preventCancel,c=e?.preventClose,d=e?.signal;return d!==void 0&&Ec(d,`${r} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!u,preventClose:!!c,signal:d}}function Ec(e,r){if(!Ou(e))throw new TypeError(`${r} is not an AbortSignal.`)}function Rc(e,r){Ie(e,r);let s=e?.readable;kn(s,"readable","ReadableWritablePair"),Fn(s,`${r} has member 'readable' that`);let u=e?.writable;return kn(u,"writable","ReadableWritablePair"),Oi(u,`${r} has member 'writable' that`),{readable:s,writable:u}}class ne{constructor(r={},s={}){r===void 0?r=null:Xo(r,"First parameter");let u=Ur(s,"Second parameter"),c=bc(r,"First parameter");if(so(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=nr(u,0);yu(this,c,d)}else{let d=Mr(u),h=nr(u,1);lc(this,c,h,d)}}get locked(){if(!Ke(this))throw St("locked");return Ze(this)}cancel(r=void 0){return Ke(this)?Ze(this)?S(new TypeError("Cannot cancel a stream that already has a reader")):Ee(this,r):S(St("cancel"))}getReader(r=void 0){if(!Ke(this))throw St("getReader");return Su(r,"First parameter").mode===void 0?At(this):Ci(this)}pipeThrough(r,s={}){if(!Ke(this))throw St("pipeThrough");Le(r,1,"pipeThrough");let u=Rc(r,"First parameter"),c=Qi(s,"Second parameter");if(Ze(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(xt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=Gi(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return k(d),u.readable}pipeTo(r,s={}){if(!Ke(this))return S(St("pipeTo"));if(r===void 0)return S("Parameter 1 is required in 'pipeTo'.");if(!Ot(r))return S(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Qi(s,"Second parameter")}catch(c){return S(c)}return Ze(this)?S(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):xt(r)?S(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Gi(this,r,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ke(this))throw St("tee");let r=uc(this);return er(r)}values(r=void 0){if(!Ke(this))throw St("values");let s=_c(r,"First parameter");return nu(this,s.preventCancel)}static from(r){return hc(r)}}Object.defineProperties(ne,{from:{enumerable:!0}}),Object.defineProperties(ne.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),l(ne.from,"from"),l(ne.prototype.cancel,"cancel"),l(ne.prototype.getReader,"getReader"),l(ne.prototype.pipeThrough,"pipeThrough"),l(ne.prototype.pipeTo,"pipeTo"),l(ne.prototype.tee,"tee"),l(ne.prototype.values,"values"),typeof t.toStringTag=="symbol"&&Object.defineProperty(ne.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(ne.prototype,t.asyncIterator,{value:ne.prototype.values,writable:!0,configurable:!0});function ar(e,r,s,u=1,c=()=>1){let d=Object.create(ne.prototype);so(d);let h=Object.create(Be.prototype);return Yi(d,h,e,r,s,u,c),d}function Ki(e,r,s){let u=Object.create(ne.prototype);so(u);let c=Object.create(ke.prototype);return Ti(u,c,e,r,s,0,void 0),u}function so(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ke(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ne}function Ze(e){return e._reader!==void 0}function Ee(e,r){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return S(e._storedError);lr(e);let s=e._reader;if(s!==void 0&&pt(s)){let c=s._readIntoRequests;s._readIntoRequests=new N,c.forEach(d=>{d._closeSteps(void 0)})}let u=e._readableStreamController[ut](r);return x(u,o)}function lr(e){e._state="closed";let r=e._reader;if(r!==void 0&&(ae(r),He(r))){let s=r._readRequests;r._readRequests=new N,s.forEach(u=>{u._closeSteps()})}}function Zi(e,r){e._state="errored",e._storedError=r;let s=e._reader;s!==void 0&&(G(s,r),He(s)?ri(s,r):vi(s,r))}function St(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Xi(e,r){Ie(e,r);let s=e?.highWaterMark;return kn(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Nn(s)}}let Ji=e=>e.byteLength;l(Ji,"size");class Kr{constructor(r){Le(r,1,"ByteLengthQueuingStrategy"),r=Xi(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!ts(this))throw es("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ts(this))throw es("size");return Ji}}Object.defineProperties(Kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Kr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function es(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function ts(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Kr}let rs=()=>1;l(rs,"size");class Zr{constructor(r){Le(r,1,"CountQueuingStrategy"),r=Xi(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!os(this))throw ns("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!os(this))throw ns("size");return rs}}Object.defineProperties(Zr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Zr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ns(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function os(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Zr}function Tc(e,r){Ie(e,r);let s=e?.cancel,u=e?.flush,c=e?.readableType,d=e?.start,h=e?.transform,R=e?.writableType;return{cancel:s===void 0?void 0:Ac(s,e,`${r} has member 'cancel' that`),flush:u===void 0?void 0:Cc(u,e,`${r} has member 'flush' that`),readableType:c,start:d===void 0?void 0:Pc(d,e,`${r} has member 'start' that`),transform:h===void 0?void 0:Ic(h,e,`${r} has member 'transform' that`),writableType:R}}function Cc(e,r,s){return be(e,s),u=>D(e,r,[u])}function Pc(e,r,s){return be(e,s),u=>Z(e,r,[u])}function Ic(e,r,s){return be(e,s),(u,c)=>D(e,r,[u,c])}function Ac(e,r,s){return be(e,s),u=>D(e,r,[u])}class Xr{constructor(r={},s={},u={}){r===void 0&&(r=null);let c=Ur(s,"Second parameter"),d=Ur(u,"Third parameter"),h=Tc(r,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=nr(d,0),O=Mr(d),P=nr(c,1),L=Mr(c),B,q=m(Re=>{B=Re});vc(this,q,P,L,R,O),xc(this,h),h.start!==void 0?B(h.start(this._transformStreamController)):B(void 0)}get readable(){if(!is(this))throw us("readable");return this._readable}get writable(){if(!is(this))throw us("writable");return this._writable}}Object.defineProperties(Xr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function vc(e,r,s,u,c,d){function h(){return r}function R(q){return kc(e,q)}function O(q){return Nc(e,q)}function P(){return Bc(e)}e._writable=Du(h,R,P,O,s,u);function L(){return Fc(e)}function B(q){return Mc(e,q)}e._readable=ar(h,L,B,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Jr(e,!0),e._transformStreamController=void 0}function is(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Xr}function ss(e,r){_e(e._readable._readableStreamController,r),ao(e,r)}function ao(e,r){tn(e._transformStreamController),or(e._writable._writableStreamController,r),lo(e)}function lo(e){e._backpressure&&Jr(e,!1)}function Jr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=m(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=r}class Xe{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!en(this))throw rn("desiredSize");let r=this._controlledTransformStream._readable._readableStreamController;return io(r)}enqueue(r=void 0){if(!en(this))throw rn("enqueue");as(this,r)}error(r=void 0){if(!en(this))throw rn("error");Lc(this,r)}terminate(){if(!en(this))throw rn("terminate");Dc(this)}}Object.defineProperties(Xe.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),l(Xe.prototype.enqueue,"enqueue"),l(Xe.prototype.error,"error"),l(Xe.prototype.terminate,"terminate"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function en(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Xe}function Oc(e,r,s,u,c){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=s,r._flushAlgorithm=u,r._cancelAlgorithm=c,r._finishPromise=void 0,r._finishPromise_resolve=void 0,r._finishPromise_reject=void 0}function xc(e,r){let s=Object.create(Xe.prototype),u,c,d;r.transform!==void 0?u=h=>r.transform(h,s):u=h=>{try{return as(s,h),y(void 0)}catch(R){return S(R)}},r.flush!==void 0?c=()=>r.flush(s):c=()=>y(void 0),r.cancel!==void 0?d=h=>r.cancel(h):d=()=>y(void 0),Oc(e,s,u,c,d)}function tn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function as(e,r){let s=e._controlledTransformStream,u=s._readable._readableStreamController;if(!kt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Dt(u,r)}catch(d){throw ao(s,d),s._readable._storedError}ac(u)!==s._backpressure&&Jr(s,!0)}function Lc(e,r){ss(e._controlledTransformStream,r)}function ls(e,r){let s=e._transformAlgorithm(r);return x(s,void 0,u=>{throw ss(e._controlledTransformStream,u),u})}function Dc(e){let r=e._controlledTransformStream,s=r._readable._readableStreamController;gt(s);let u=new TypeError("TransformStream terminated");ao(r,u)}function kc(e,r){let s=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return x(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return ls(s,r)})}return ls(s,r)}function Nc(e,r){let s=e._transformStreamController;if(s._finishPromise!==void 0)return s._finishPromise;let u=e._readable;s._finishPromise=m((d,h)=>{s._finishPromise_resolve=d,s._finishPromise_reject=h});let c=s._cancelAlgorithm(r);return tn(s),A(c,()=>(u._state==="errored"?Nt(s,u._storedError):(_e(u._readableStreamController,r),uo(s)),null),d=>(_e(u._readableStreamController,d),Nt(s,d),null)),s._finishPromise}function Bc(e){let r=e._transformStreamController;if(r._finishPromise!==void 0)return r._finishPromise;let s=e._readable;r._finishPromise=m((c,d)=>{r._finishPromise_resolve=c,r._finishPromise_reject=d});let u=r._flushAlgorithm();return tn(r),A(u,()=>(s._state==="errored"?Nt(r,s._storedError):(gt(s._readableStreamController),uo(r)),null),c=>(_e(s._readableStreamController,c),Nt(r,c),null)),r._finishPromise}function Fc(e){return Jr(e,!1),e._backpressureChangePromise}function Mc(e,r){let s=e._transformStreamController;if(s._finishPromise!==void 0)return s._finishPromise;let u=e._writable;s._finishPromise=m((d,h)=>{s._finishPromise_resolve=d,s._finishPromise_reject=h});let c=s._cancelAlgorithm(r);return tn(s),A(c,()=>(u._state==="errored"?Nt(s,u._storedError):(or(u._writableStreamController,r),lo(e),uo(s)),null),d=>(or(u._writableStreamController,d),lo(e),Nt(s,d),null)),s._finishPromise}function rn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function uo(e){e._finishPromise_resolve!==void 0&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Nt(e,r){e._finishPromise_reject!==void 0&&(k(e._finishPromise),e._finishPromise_reject(r),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function us(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=Kr,n.CountQueuingStrategy=Zr,n.ReadableByteStreamController=ke,n.ReadableStream=ne,n.ReadableStreamBYOBReader=Ye,n.ReadableStreamBYOBRequest=dt,n.ReadableStreamDefaultController=Be,n.ReadableStreamDefaultReader=$e,n.TransformStream=Xr,n.TransformStreamDefaultController=Xe,n.WritableStream=Qe,n.WritableStreamDefaultController=Lt,n.WritableStreamDefaultWriter=Ne})});var pl=Q(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:t}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=t}catch(o){throw n.emitWarning=t,o}}catch{Object.assign(globalThis,ml())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let i=0,a=this;return new ReadableStream({type:"bytes",async pull(l){let b=await a.slice(i,Math.min(a.size,i+65536)).arrayBuffer();i+=b.byteLength,l.enqueue(new Uint8Array(b)),i===a.size&&l.close()}})})}catch{}});async function*qo(n,t=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,a=o.byteOffset+o.byteLength;for(;i!==a;){let l=Math.min(a-i,bl),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,a=o;for(;i!==a.size;){let f=await a.slice(i,Math.min(a.size,i+bl)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var hm,bl,yl,ld,We,gr=ur(()=>{hm=X(pl(),1);bl=65536;yl=class jo{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof jo?f=l:f=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let a=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of qo(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of qo(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=qo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:a}=this,l=t<0?Math.max(a+t,0):Math.min(t,a),f=o<0?Math.max(a+o,0):Math.min(o,a),b=Math.max(f-l,0),p=this.#e,m=[],y=0;for(let v of p){if(y>=b)break;let A=ArrayBuffer.isView(v)?v.byteLength:v.size;if(l&&A<=l)l-=A,f-=A;else{let w;ArrayBuffer.isView(v)?(w=v.subarray(l,Math.min(A,f)),y+=w.byteLength):(w=v.slice(l,Math.min(A,f)),y+=w.size),f-=A,m.push(w),l=0}}let S=new jo([],{type:String(i).toLowerCase()});return S.#r=b,S.#e=m,S}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(yl.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});ld=yl,We=ld});var ud,cd,Yt,$o=ur(()=>{gr();ud=class extends We{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let a=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof We&&/^(File)$/.test(t[Symbol.toStringTag])}},cd=ud,Yt=cd});function wl(n,t=We){var o=`${gl()}${gl()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],a=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?i.push(a+Ho(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(a+Ho(f)+`"; filename="${Ho(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var Sr,fd,dd,gl,hd,Sl,Ho,Et,Rt,_n=ur(()=>{gr();$o();({toStringTag:Sr,iterator:fd,hasInstance:dd}=Symbol),gl=Math.random,hd="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Sl=(n,t,o)=>(n+="",/^(Blob|File)$/.test(t&&t[Sr])?[(o=o!==void 0?o+"":t[Sr]=="File"?t.name:"blob",n),t.name!==o||t[Sr]=="blob"?new Yt([t],o,t):t]:[n,t+""]),Ho=(n,t)=>(t?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Et=(n,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Rt=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Sr](){return"FormData"}[fd](){return this.entries()}static[dd](t){return t&&typeof t=="object"&&t[Sr]==="FormData"&&!hd.some(o=>typeof t[o]!="function")}append(...t){Et("append",arguments,2),this.#e.push(Sl(...t))}delete(t){Et("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Et("get",arguments,1),t+="";for(var o=this.#e,i=o.length,a=0;a<i;a++)if(o[a][0]===t)return o[a][1];return null}getAll(t,o){return Et("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Et("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Et("forEach",arguments,1);for(var[i,a]of this)t.call(o,a,i,this)}set(...t){Et("set",arguments,2);var o=[],i=!0;t=Sl(...t),this.#e.forEach(a=>{a[0]===t[0]?i&&(i=!o.push(t)):o.push(a)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Cl=Q((Pm,Tl)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),t=new n().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}Tl.exports=globalThis.DOMException});var _r,Pl,md,Rn,Vo=ur(()=>{_r=require("node:fs"),Pl=X(Cl(),1);$o();gr();({stat:md}=_r.promises),Rn=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Rn({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await md(this.#e);if(t>this.lastModified)throw new Pl.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,_r.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Al={};fs(Al,{toFormData:()=>_d});function wd(n){let t=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(a,l)=>String.fromCharCode(l)),i}async function _d(n,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Yo(o[1]||o[2]),a,l,f,b,p,m,y=[],S=new Rt,v=k=>{f+=x.decode(k,{stream:!0})},A=k=>{y.push(k)},w=()=>{let k=new Yt(y,m,{type:p});S.append(b,k)},W=()=>{S.append(b,f)},x=new TextDecoder("utf-8");x.decode(),i.onPartBegin=function(){i.onPartData=v,i.onPartEnd=W,a="",l="",f="",b="",p="",m=null,y.length=0},i.onHeaderField=function(k){a+=x.decode(k,{stream:!0})},i.onHeaderValue=function(k){l+=x.decode(k,{stream:!0})},i.onHeaderEnd=function(){if(l+=x.decode(),a=a.toLowerCase(),a==="content-disposition"){let k=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);k&&(b=k[2]||k[3]||""),m=wd(l),m&&(i.onPartData=A,i.onPartEnd=w)}else a==="content-type"&&(p=l);l="",a=""};for await(let k of n)i.write(k);return i.end(),S}var Oe,$,Il,at,Tn,Cn,pd,Er,bd,yd,gd,Sd,Tt,Yo,vl=ur(()=>{Vo();_n();Oe=0,$={START_BOUNDARY:Oe++,HEADER_FIELD_START:Oe++,HEADER_FIELD:Oe++,HEADER_VALUE_START:Oe++,HEADER_VALUE:Oe++,HEADER_VALUE_ALMOST_DONE:Oe++,HEADERS_ALMOST_DONE:Oe++,PART_DATA_START:Oe++,PART_DATA:Oe++,END:Oe++},Il=1,at={PART_BOUNDARY:Il,LAST_BOUNDARY:Il*=2},Tn=10,Cn=13,pd=32,Er=45,bd=58,yd=97,gd=122,Sd=n=>n|32,Tt=()=>{},Yo=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Tt,this.onHeaderField=Tt,this.onHeadersEnd=Tt,this.onHeaderValue=Tt,this.onPartBegin=Tt,this.onPartData=Tt,this.onPartEnd=Tt,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=$.START_BOUNDARY}write(t){let o=0,i=t.length,a=this.index,{lookbehind:l,boundary:f,boundaryChars:b,index:p,state:m,flags:y}=this,S=this.boundary.length,v=S-1,A=t.length,w,W,x=D=>{this[D+"Mark"]=o},k=D=>{delete this[D+"Mark"]},z=(D,H,N,se)=>{(H===void 0||H!==N)&&this[D](se&&se.subarray(H,N))},Z=(D,H)=>{let N=D+"Mark";N in this&&(H?(z(D,this[N],o,t),delete this[N]):(z(D,this[N],t.length,t),this[N]=0))};for(o=0;o<i;o++)switch(w=t[o],m){case $.START_BOUNDARY:if(p===f.length-2){if(w===Er)y|=at.LAST_BOUNDARY;else if(w!==Cn)return;p++;break}else if(p-1===f.length-2){if(y&at.LAST_BOUNDARY&&w===Er)m=$.END,y=0;else if(!(y&at.LAST_BOUNDARY)&&w===Tn)p=0,z("onPartBegin"),m=$.HEADER_FIELD_START;else return;break}w!==f[p+2]&&(p=-2),w===f[p+2]&&p++;break;case $.HEADER_FIELD_START:m=$.HEADER_FIELD,x("onHeaderField"),p=0;case $.HEADER_FIELD:if(w===Cn){k("onHeaderField"),m=$.HEADERS_ALMOST_DONE;break}if(p++,w===Er)break;if(w===bd){if(p===1)return;Z("onHeaderField",!0),m=$.HEADER_VALUE_START;break}if(W=Sd(w),W<yd||W>gd)return;break;case $.HEADER_VALUE_START:if(w===pd)break;x("onHeaderValue"),m=$.HEADER_VALUE;case $.HEADER_VALUE:w===Cn&&(Z("onHeaderValue",!0),z("onHeaderEnd"),m=$.HEADER_VALUE_ALMOST_DONE);break;case $.HEADER_VALUE_ALMOST_DONE:if(w!==Tn)return;m=$.HEADER_FIELD_START;break;case $.HEADERS_ALMOST_DONE:if(w!==Tn)return;z("onHeadersEnd"),m=$.PART_DATA_START;break;case $.PART_DATA_START:m=$.PART_DATA,x("onPartData");case $.PART_DATA:if(a=p,p===0){for(o+=v;o<A&&!(t[o]in b);)o+=S;o-=v,w=t[o]}if(p<f.length)f[p]===w?(p===0&&Z("onPartData",!0),p++):p=0;else if(p===f.length)p++,w===Cn?y|=at.PART_BOUNDARY:w===Er?y|=at.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(y&at.PART_BOUNDARY){if(p=0,w===Tn){y&=~at.PART_BOUNDARY,z("onPartEnd"),z("onPartBegin"),m=$.HEADER_FIELD_START;break}}else y&at.LAST_BOUNDARY&&w===Er?(z("onPartEnd"),m=$.END,y=0):p=0;if(p>0)l[p-1]=w;else if(a>0){let D=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);z("onPartData",0,a,D),a=0,x("onPartData"),o--}break;case $.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}Z("onHeaderField"),Z("onHeaderValue"),Z("onPartData"),this.index=p,this.state=m,this.flags=y}end(){if(this.state===$.HEADER_FIELD_START&&this.index===0||this.state===$.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==$.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Nd={};fs(Nd,{default:()=>kd});module.exports=$c(Nd);var fe=require("@raycast/api");var K=require("@raycast/api");var Wa=require("node:buffer"),za=X(require("node:path"),1),Do=X(require("node:child_process"),1),hr=X(require("node:process"),1),qa=X(ea(),1);function _o(n){let t=typeof n=="string"?`
`:`
`.charCodeAt(),o=typeof n=="string"?"\r":"\r".charCodeAt();return n[n.length-1]===t&&(n=n.slice(0,-1)),n[n.length-1]===o&&(n=n.slice(0,-1)),n}var cr=X(require("node:process"),1),qt=X(require("node:path"),1),ta=X(require("node:url"),1);function an(n={}){let{env:t=process.env,platform:o=process.platform}=n;return o!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"}function gf(n={}){let{cwd:t=cr.default.cwd(),path:o=cr.default.env[an()],execPath:i=cr.default.execPath}=n,a,l=t instanceof URL?ta.default.fileURLToPath(t):t,f=qt.default.resolve(l),b=[];for(;a!==f;)b.push(qt.default.join(f,"node_modules/.bin")),a=f,f=qt.default.resolve(f,"..");return b.push(qt.default.resolve(l,i,"..")),[...b,o].join(qt.default.delimiter)}function ra({env:n=cr.default.env,...t}={}){n={...n};let o=an({env:n});return t.path=n[o],n[o]=gf(t),n}var Sf=(n,t,o,i)=>{if(o==="length"||o==="prototype"||o==="arguments"||o==="caller")return;let a=Object.getOwnPropertyDescriptor(n,o),l=Object.getOwnPropertyDescriptor(t,o);!wf(a,l)&&i||Object.defineProperty(n,o,l)},wf=function(n,t){return n===void 0||n.configurable||n.writable===t.writable&&n.enumerable===t.enumerable&&n.configurable===t.configurable&&(n.writable||n.value===t.value)},_f=(n,t)=>{let o=Object.getPrototypeOf(t);o!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,o)},Ef=(n,t)=>`/* Wrapped ${n}*/
${t}`,Rf=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Tf=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Cf=(n,t,o)=>{let i=o===""?"":`with ${o.trim()}() `,a=Ef.bind(null,i,t.toString());Object.defineProperty(a,"name",Tf),Object.defineProperty(n,"toString",{...Rf,value:a})};function Eo(n,t,{ignoreNonConfigurable:o=!1}={}){let{name:i}=n;for(let a of Reflect.ownKeys(t))Sf(n,t,a,o);return _f(n,t),Cf(n,t,i),n}var ln=new WeakMap,na=(n,t={})=>{if(typeof n!="function")throw new TypeError("Expected a function");let o,i=0,a=n.displayName||n.name||"<anonymous>",l=function(...f){if(ln.set(l,++i),i===1)o=n.apply(this,f),n=null;else if(t.throw===!0)throw new Error(`Function \`${a}\` can only be called once`);return o};return Eo(l,n),ln.set(l,i),l};na.callCount=n=>{if(!ln.has(n))throw new Error(`The given function \`${n.name}\` is not wrapped by the \`onetime\` package`);return ln.get(n)};var oa=na;var ca=require("node:os");var ia=function(){let n=aa-sa+1;return Array.from({length:n},Pf)},Pf=function(n,t){return{name:`SIGRT${t+1}`,number:sa+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},sa=34,aa=64;var ua=require("node:os");var la=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var Ro=function(){let n=ia();return[...la,...n].map(If)},If=function({name:n,number:t,description:o,action:i,forced:a=!1,standard:l}){let{signals:{[n]:f}}=ua.constants,b=f!==void 0;return{name:n,number:b?f:t,description:o,supported:b,action:i,forced:a,standard:l}};var Af=function(){let n=Ro();return Object.fromEntries(n.map(vf))},vf=function({name:n,number:t,description:o,supported:i,action:a,forced:l,standard:f}){return[n,{name:n,number:t,description:o,supported:i,action:a,forced:l,standard:f}]},fa=Af(),Of=function(){let n=Ro(),t=64+1,o=Array.from({length:t},(i,a)=>xf(a,n));return Object.assign({},...o)},xf=function(n,t){let o=Lf(n,t);if(o===void 0)return{};let{name:i,description:a,supported:l,action:f,forced:b,standard:p}=o;return{[n]:{name:i,number:n,description:a,supported:l,action:f,forced:b,standard:p}}},Lf=function(n,t){let o=t.find(({name:i})=>ca.constants.signals[i]===n);return o!==void 0?o:t.find(i=>i.number===n)},ch=Of();var Df=({timedOut:n,timeout:t,errorCode:o,signal:i,signalDescription:a,exitCode:l,isCanceled:f})=>n?`timed out after ${t} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${a})`:l!==void 0?`failed with exit code ${l}`:"failed",To=({stdout:n,stderr:t,all:o,error:i,signal:a,exitCode:l,command:f,escapedCommand:b,timedOut:p,isCanceled:m,killed:y,parsed:{options:{timeout:S}}})=>{l=l===null?void 0:l,a=a===null?void 0:a;let v=a===void 0?void 0:fa[a].description,A=i&&i.code,W=`Command ${Df({timedOut:p,timeout:S,errorCode:A,signal:a,signalDescription:v,exitCode:l,isCanceled:m})}: ${f}`,x=Object.prototype.toString.call(i)==="[object Error]",k=x?`${W}
${i.message}`:W,z=[k,t,n].filter(Boolean).join(`
`);return x?(i.originalMessage=i.message,i.message=z):i=new Error(z),i.shortMessage=k,i.command=f,i.escapedCommand=b,i.exitCode=l,i.signal=a,i.signalDescription=v,i.stdout=n,i.stderr=t,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=!!p,i.isCanceled=m,i.killed=y&&!p,i};var un=["stdin","stdout","stderr"],kf=n=>un.some(t=>n[t]!==void 0),da=n=>{if(!n)return;let{stdio:t}=n;if(t===void 0)return un.map(i=>n[i]);if(kf(n))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${un.map(i=>`\`${i}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,un.length);return Array.from({length:o},(i,a)=>t[a])};var Sa=X(require("node:os"),1),wa=X(ga(),1),Nf=1e3*5,_a=(n,t="SIGTERM",o={})=>{let i=n(t);return Bf(n,t,o,i),i},Bf=(n,t,o,i)=>{if(!Ff(t,o,i))return;let a=Uf(o),l=setTimeout(()=>{n("SIGKILL")},a);l.unref&&l.unref()},Ff=(n,{forceKillAfterTimeout:t},o)=>Mf(n)&&t!==!1&&o,Mf=n=>n===Sa.default.constants.signals.SIGTERM||typeof n=="string"&&n.toUpperCase()==="SIGTERM",Uf=({forceKillAfterTimeout:n=!0})=>{if(n===!0)return Nf;if(!Number.isFinite(n)||n<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`);return n},Ea=(n,t)=>{n.kill()&&(t.isCanceled=!0)},Wf=(n,t,o)=>{n.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Ra=(n,{timeout:t,killSignal:o="SIGTERM"},i)=>{if(t===0||t===void 0)return i;let a,l=new Promise((b,p)=>{a=setTimeout(()=>{Wf(n,o,p)},t)}),f=i.finally(()=>{clearTimeout(a)});return Promise.race([l,f])},Ta=({timeout:n})=>{if(n!==void 0&&(!Number.isFinite(n)||n<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`)},Ca=async(n,{cleanup:t,detached:o},i)=>{if(!t||o)return i;let a=(0,wa.default)(()=>{n.kill()});return i.finally(()=>{a()})};function Pa(n){return n!==null&&typeof n=="object"&&typeof n.pipe=="function"}var Oo=X(va(),1),La=X(xa(),1),Da=(n,t)=>{t!==void 0&&(Pa(t)?t.pipe(n.stdin):n.stdin.end(t))},ka=(n,{all:t})=>{if(!t||!n.stdout&&!n.stderr)return;let o=(0,La.default)();return n.stdout&&o.add(n.stdout),n.stderr&&o.add(n.stderr),o},Ao=async(n,t)=>{if(!(!n||t===void 0)){n.destroy();try{return await t}catch(o){return o.bufferedData}}},vo=(n,{encoding:t,buffer:o,maxBuffer:i})=>{if(!(!n||!o))return t?(0,Oo.default)(n,{encoding:t,maxBuffer:i}):Oo.default.buffer(n,{maxBuffer:i})},Na=async({stdout:n,stderr:t,all:o},{encoding:i,buffer:a,maxBuffer:l},f)=>{let b=vo(n,{encoding:i,buffer:a,maxBuffer:l}),p=vo(t,{encoding:i,buffer:a,maxBuffer:l}),m=vo(o,{encoding:i,buffer:a,maxBuffer:l*2});try{return await Promise.all([f,b,p,m])}catch(y){return Promise.all([{error:y,signal:y.signal,timedOut:y.timedOut},Ao(n,b),Ao(t,p),Ao(o,m)])}};var Yf=(async()=>{})().constructor.prototype,Qf=["then","catch","finally"].map(n=>[n,Reflect.getOwnPropertyDescriptor(Yf,n)]),xo=(n,t)=>{for(let[o,i]of Qf){let a=typeof t=="function"?(...l)=>Reflect.apply(i.value,t(),l):i.value.bind(t);Reflect.defineProperty(n,o,{...i,value:a})}return n},Ba=n=>new Promise((t,o)=>{n.on("exit",(i,a)=>{t({exitCode:i,signal:a})}),n.on("error",i=>{o(i)}),n.stdin&&n.stdin.on("error",i=>{o(i)})});var Fa=(n,t=[])=>Array.isArray(t)?[n,...t]:[n],Kf=/^[\w.-]+$/,Zf=/"/g,Xf=n=>typeof n!="string"||Kf.test(n)?n:`"${n.replace(Zf,'\\"')}"`,Ma=(n,t)=>Fa(n,t).join(" "),Ua=(n,t)=>Fa(n,t).map(o=>Xf(o)).join(" ");var Jf=1e3*1e3*100,ed=({env:n,extendEnv:t,preferLocal:o,localDir:i,execPath:a})=>{let l=t?{...hr.default.env,...n}:n;return o?ra({env:l,cwd:i,execPath:a}):l},td=(n,t,o={})=>{let i=qa.default._parse(n,t,o);return n=i.command,t=i.args,o=i.options,o={maxBuffer:Jf,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||hr.default.cwd(),execPath:hr.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=ed(o),o.stdio=da(o),hr.default.platform==="win32"&&za.default.basename(n,".exe")==="cmd"&&t.unshift("/q"),{file:n,args:t,options:o,parsed:i}},Lo=(n,t,o)=>typeof t!="string"&&!Wa.Buffer.isBuffer(t)?o===void 0?void 0:"":n.stripFinalNewline?_o(t):t;function ja(n,t,o){let i=td(n,t,o),a=Ma(n,t),l=Ua(n,t);Ta(i.options);let f;try{f=Do.default.spawn(i.file,i.args,i.options)}catch(A){let w=new Do.default.ChildProcess,W=Promise.reject(To({error:A,stdout:"",stderr:"",all:"",command:a,escapedCommand:l,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return xo(w,W)}let b=Ba(f),p=Ra(f,i.options,b),m=Ca(f,i.options,p),y={isCanceled:!1};f.kill=_a.bind(null,f.kill.bind(f)),f.cancel=Ea.bind(null,f,y);let v=oa(async()=>{let[{error:A,exitCode:w,signal:W,timedOut:x},k,z,Z]=await Na(f,i.options,m),D=Lo(i.options,k),H=Lo(i.options,z),N=Lo(i.options,Z);if(A||w!==0||W!==null){let se=To({error:A,exitCode:w,signal:W,stdout:D,stderr:H,all:N,command:a,escapedCommand:l,parsed:i,timedOut:x,isCanceled:y.isCanceled||(i.options.signal?i.options.signal.aborted:!1),killed:f.killed});if(!i.options.reject)return se;throw se}return{command:a,escapedCommand:l,exitCode:0,stdout:D,stderr:H,all:N,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Da(f,i.options.input),f.all=ka(f,i.options),xo(f,v)}var pe=require("fs"),Zl=require("path/posix");var mr=require("@raycast/api");var $a="https://bitwarden.com";var Ue={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason",VAULT_FAVORITE_ORDER:"vaultFavoriteOrder"};var qh={[1]:mr.Icon.Globe,[3]:mr.Icon.CreditCard,[4]:mr.Icon.Person,[2]:mr.Icon.Document};var Ga=require("@raycast/api");var Ha={lowercase:!0,uppercase:!0,number:!1,special:!1,passphrase:!1,length:14,words:3,separator:"-",capitalize:!1,includeNumber:!1};function Va(n){return Object.entries(n).flatMap(([t,o])=>o?[`--${t}`,o]:[])}async function Ya(){let n=await Ga.LocalStorage.getItem(Ue.PASSWORD_OPTIONS);return{...Ha,...n?JSON.parse(n):{}}}var pr=require("@raycast/api");var nd={IMMEDIATELY:"0",ONE_MINUTE:"60000",FIVE_MINUTES:"300000",FIFTEEN_MINUTES:"900000",THIRTY_MINUTES:"1800000",ONE_HOUR:"3600000",FOUR_HOURS:"14400000",EIGHT_HOURS:"28800000",ONE_DAY:"86400000",NEVER:"-1",SYSTEM_LOCK:"-2",SYSTEM_SLEEP:"-3"},ve=Object.entries(nd).reduce((n,[t,o])=>(n[t]=parseInt(o),n),{});var od={[ve.IMMEDIATELY]:"Immediately",[ve.ONE_MINUTE]:"1 Minute",[ve.FIVE_MINUTES]:"5 Minutes",[ve.FIFTEEN_MINUTES]:"15 Minutes",[ve.THIRTY_MINUTES]:"30 Minutes",[ve.ONE_HOUR]:"1 Hour",[ve.FOUR_HOURS]:"4 Hours",[ve.EIGHT_HOURS]:"8 Hours",[ve.ONE_DAY]:"1 Day"};var em={[1]:"Login",[3]:"Card",[4]:"Identity",[2]:"Secure Note"};function Qa(){let{serverUrl:n}=(0,pr.getPreferenceValues)();return n===""||n==="bitwarden.com"||n==="https://bitwarden.com"?"":n}var id={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function ko(n){let t=id[pr.environment.commandName],o=(0,pr.getPreferenceValues)()[t];return o==="never"?!1:o==="always"?!0:o==="passwords"?n==="password":!0}var pn=class extends Error{constructor(t,o){super(t),this.stack=o}},br=class extends pn{constructor(t,o){super(t,o)}},bn=class extends br{constructor(t,o){super(t??"Bitwarden CLI not found",o),this.name="CLINotFoundError",this.stack=o}};var yn=class extends br{constructor(t,o){super(t??"Vault is locked",o),this.name="VaultIsLockedError"}},yr=class extends pn{constructor(t,o){super(t??"Not logged in",o),this.name="NotLoggedInError"}},Gt=class extends br{constructor(t,o){super(t??"Failed do download Bitwarden CLI",o),this.name="EnsureCliBinError"}};function et(n,t){try{return n()}catch{return t}}var Ka=n=>{if(n){if(typeof n=="string")return n;if(n instanceof Error){let{message:t,name:o}=n;return n.stack?n.stack:`${o}: ${t}`}return String(n)}};var Ir=require("path"),Zt=require("fs/promises");var st=require("fs"),Sn=require("fs/promises"),nl=require("path"),ol=X(rl());function il(n){return new Promise(t=>{let o=setInterval(()=>{et(()=>{}),(0,st.statSync)(n).isFile()&&(clearInterval(o),t())},300)})}async function sl(n,t){let o=new ol.default.async({file:n});(0,st.existsSync)(t)||(0,st.mkdirSync)(t,{recursive:!0}),await o.extract(null,t),await o.close()}async function al(n,t){let o=!1;try{let i=await(0,Sn.readdir)(t);for await(let a of i)a.startsWith(n)&&await et(async()=>{await(0,Sn.unlink)((0,nl.join)(t,a)),o=!0})}catch{return!1}return o}function ll(...n){for(let t of n)et(()=>(0,st.unlinkSync)(t))}var ul=require("fs"),cl=require("crypto");function fl(n){try{return(0,cl.createHash)("sha256").update((0,ul.readFileSync)(n)).digest("hex")}catch{return null}}var Vl=require("fs"),Yl=require("fs/promises"),Ql=require("url");var $l=X(require("node:http"),1),Hl=X(require("node:https"),1),Ct=X(require("node:zlib"),1),me=X(require("node:stream"),1),Cr=require("node:buffer");function ad(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let t=n.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,t).split(";"),i="",a=!1,l=o[0]||"text/plain",f=l;for(let y=1;y<o.length;y++)o[y]==="base64"?a=!0:o[y]&&(f+=`;${o[y]}`,o[y].indexOf("charset=")===0&&(i=o[y].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let b=a?"base64":"ascii",p=unescape(n.substring(t+1)),m=Buffer.from(p,b);return m.type=l,m.typeFull=f,m.charset=i,m}var dl=ad;var we=X(require("node:stream"),1),qe=require("node:util"),he=require("node:buffer");gr();_n();var ze=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ue=class extends ze{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var En=Symbol.toStringTag,Go=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[En]==="URLSearchParams",wr=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[En]),_l=n=>typeof n=="object"&&(n[En]==="AbortSignal"||n[En]==="EventTarget"),El=(n,t)=>{let o=new URL(t).hostname,i=new URL(n).hostname;return o===i||o.endsWith(`.${i}`)},Rl=(n,t)=>{let o=new URL(t).protocol,i=new URL(n).protocol;return o===i};var Ed=(0,qe.promisify)(we.default.pipeline),ce=Symbol("Body internals"),xe=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:Go(t)?t=he.Buffer.from(t.toString()):wr(t)||he.Buffer.isBuffer(t)||(qe.types.isAnyArrayBuffer(t)?t=he.Buffer.from(t):ArrayBuffer.isView(t)?t=he.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof we.default||(t instanceof Rt?(t=wl(t),i=t.type.split("=")[1]):t=he.Buffer.from(String(t))));let a=t;he.Buffer.isBuffer(t)?a=we.default.Readable.from(t):wr(t)&&(a=we.default.Readable.from(t.stream())),this[ce]={body:t,stream:a,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof we.default&&t.on("error",l=>{let f=l instanceof ze?l:new ue(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ce].error=f})}get body(){return this[ce].stream}get bodyUsed(){return this[ce].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await Qo(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new Rt,a=new URLSearchParams(await this.text());for(let[l,f]of a)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(vl(),Al));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[ce].body&&this[ce].body.type||"",o=await this.arrayBuffer();return new We([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await Qo(this);return new TextDecoder().decode(t)}buffer(){return Qo(this)}};xe.prototype.buffer=(0,qe.deprecate)(xe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(xe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,qe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Qo(n){if(n[ce].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[ce].disturbed=!0,n[ce].error)throw n[ce].error;let{body:t}=n;if(t===null)return he.Buffer.alloc(0);if(!(t instanceof we.default))return he.Buffer.alloc(0);let o=[],i=0;try{for await(let a of t){if(n.size>0&&i+a.length>n.size){let l=new ue(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw t.destroy(l),l}i+=a.length,o.push(a)}}catch(a){throw a instanceof ze?a:new ue(`Invalid response body while trying to fetch ${n.url}: ${a.message}`,"system",a)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(a=>typeof a=="string")?he.Buffer.from(o.join("")):he.Buffer.concat(o,i)}catch(a){throw new ue(`Could not create Buffer from response body for ${n.url}: ${a.message}`,"system",a)}else throw new ue(`Premature close of server response while trying to fetch ${n.url}`)}var Qt=(n,t)=>{let o,i,{body:a}=n[ce];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof we.default&&typeof a.getBoundary!="function"&&(o=new we.PassThrough({highWaterMark:t}),i=new we.PassThrough({highWaterMark:t}),a.pipe(o),a.pipe(i),n[ce].stream=o,a=i),a},Rd=(0,qe.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Pn=(n,t)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":Go(n)?"application/x-www-form-urlencoded;charset=UTF-8":wr(n)?n.type||null:he.Buffer.isBuffer(n)||qe.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof Rt?`multipart/form-data; boundary=${t[ce].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${Rd(n)}`:n instanceof we.default?null:"text/plain;charset=UTF-8",Ol=n=>{let{body:t}=n[ce];return t===null?0:wr(t)?t.size:he.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},xl=async(n,{body:t})=>{t===null?n.end():await Ed(t,n)};var Ko=require("node:util"),Rr=X(require("node:http"),1),In=typeof Rr.default.validateHeaderName=="function"?Rr.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let t=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Zo=typeof Rr.default.validateHeaderValue=="function"?Rr.default.validateHeaderValue:(n,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},ie=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof ie){let i=t.raw();for(let[a,l]of Object.entries(i))o.push(...l.map(f=>[a,f]))}else if(t!=null)if(typeof t=="object"&&!Ko.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(a=>{if(typeof a!="object"||Ko.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,a])=>(In(i),Zo(i,String(a)),[String(i).toLowerCase(),String(a)])):void 0,super(o),new Proxy(this,{get(i,a,l){switch(a){case"append":case"set":return(f,b)=>(In(f),Zo(f,String(b)),URLSearchParams.prototype[a].call(i,String(f).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return f=>(In(f),URLSearchParams.prototype[a].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,a,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(ie.prototype,["get","entries","forEach","values"].reduce((n,t)=>(n[t]={enumerable:!0},n),{}));function Ll(n=[]){return new ie(n.reduce((t,o,i,a)=>(i%2===0&&t.push(a.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return In(t),Zo(t,String(o)),!0}catch{return!1}}))}var Td=new Set([301,302,303,307,308]),An=n=>Td.has(n);var Te=Symbol("Response internals"),te=class extends xe{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,a=new ie(o.headers);if(t!==null&&!a.has("Content-Type")){let l=Pn(t,this);l&&a.append("Content-Type",l)}this[Te]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:a,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[Te].type}get url(){return this[Te].url||""}get status(){return this[Te].status}get ok(){return this[Te].status>=200&&this[Te].status<300}get redirected(){return this[Te].counter>0}get statusText(){return this[Te].statusText}get headers(){return this[Te].headers}get highWaterMark(){return this[Te].highWaterMark}clone(){return new te(Qt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!An(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new te(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new te(null,{status:0,statusText:""});return t[Te].type="error",t}static json(t=void 0,o={}){let i=JSON.stringify(t);if(i===void 0)throw new TypeError("data is not JSON serializable");let a=new ie(o&&o.headers);return a.has("content-type")||a.set("content-type","application/json"),new te(i,{...o,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(te.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var zl=require("node:url"),ql=require("node:util");var Dl=n=>{if(n.search)return n.search;let t=n.href.length-1,o=n.hash||(n.href[t]==="#"?"#":"");return n.href[t-o.length]==="?"?"?":""};var Nl=require("node:net");function kl(n,t=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",t&&(n.pathname="",n.search=""),n)}var Bl=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Fl="strict-origin-when-cross-origin";function Ml(n){if(!Bl.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function Cd(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let t=n.host.replace(/(^\[)|(]$)/g,""),o=(0,Nl.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:n.host==="localhost"||n.host.endsWith(".localhost")?!1:n.protocol==="file:"}function Kt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:Cd(n)}function Ul(n,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let i=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let a=n.referrer,l=kl(a),f=kl(a,!0);l.toString().length>4096&&(l=f),t&&(l=t(l)),o&&(f=o(f));let b=new URL(n.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Kt(l)&&!Kt(b)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===b.origin?l:Kt(l)&&!Kt(b)?"no-referrer":f;case"same-origin":return l.origin===b.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===b.origin?l:f;case"no-referrer-when-downgrade":return Kt(l)&&!Kt(b)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Wl(n){let t=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&Bl.has(i)&&(o=i);return o}var ee=Symbol("Request internals"),Tr=n=>typeof n=="object"&&typeof n[ee]=="object",Pd=(0,ql.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),je=class extends xe{constructor(t,o={}){let i;if(Tr(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let a=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!Tr(o)&&"data"in o&&Pd(),(o.body!=null||Tr(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Tr(t)&&t.body!==null?Qt(t):null;super(l,{size:o.size||t.size||0});let f=new ie(o.headers||t.headers||{});if(l!==null&&!f.has("Content-Type")){let m=Pn(l,this);m&&f.set("Content-Type",m)}let b=Tr(t)?t.signal:null;if("signal"in o&&(b=o.signal),b!=null&&!_l(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=o.referrer==null?t.referrer:o.referrer;if(p==="")p="no-referrer";else if(p){let m=new URL(p);p=/^about:(\/\/)?client$/.test(m)?"client":m}else p=void 0;this[ee]={method:a,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:i,signal:b,referrer:p},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[ee].method}get url(){return(0,zl.format)(this[ee].parsedURL)}get headers(){return this[ee].headers}get redirect(){return this[ee].redirect}get signal(){return this[ee].signal}get referrer(){if(this[ee].referrer==="no-referrer")return"";if(this[ee].referrer==="client")return"about:client";if(this[ee].referrer)return this[ee].referrer.toString()}get referrerPolicy(){return this[ee].referrerPolicy}set referrerPolicy(t){this[ee].referrerPolicy=Ml(t)}clone(){return new je(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(je.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var jl=n=>{let{parsedURL:t}=n[ee],o=new ie(n[ee].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(i="0"),n.body!==null){let b=Ol(n);typeof b=="number"&&!Number.isNaN(b)&&(i=String(b))}i&&o.set("Content-Length",i),n.referrerPolicy===""&&(n.referrerPolicy=Fl),n.referrer&&n.referrer!=="no-referrer"?n[ee].referrer=Ul(n):n[ee].referrer="no-referrer",n[ee].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=n;typeof a=="function"&&(a=a(t));let l=Dl(t),f={path:t.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:a};return{parsedURL:t,options:f}};var vn=class extends ze{constructor(t,o="aborted"){super(t,o)}};_n();Vo();var Id=new Set(["data:","http:","https:"]);async function On(n,t){return new Promise((o,i)=>{let a=new je(n,t),{parsedURL:l,options:f}=jl(a);if(!Id.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let w=dl(a.url),W=new te(w,{headers:{"Content-Type":w.typeFull}});o(W);return}let b=(l.protocol==="https:"?Hl.default:$l.default).request,{signal:p}=a,m=null,y=()=>{let w=new vn("The operation was aborted.");i(w),a.body&&a.body instanceof me.default.Readable&&a.body.destroy(w),!(!m||!m.body)&&m.body.emit("error",w)};if(p&&p.aborted){y();return}let S=()=>{y(),A()},v=b(l.toString(),f);p&&p.addEventListener("abort",S);let A=()=>{v.abort(),p&&p.removeEventListener("abort",S)};v.on("error",w=>{i(new ue(`request to ${a.url} failed, reason: ${w.message}`,"system",w)),A()}),Ad(v,w=>{m&&m.body&&m.body.destroy(w)}),process.version<"v14"&&v.on("socket",w=>{let W;w.prependListener("end",()=>{W=w._eventsCount}),w.prependListener("close",x=>{if(m&&W<w._eventsCount&&!x){let k=new Error("Premature close");k.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",k)}})}),v.on("response",w=>{v.setTimeout(0);let W=Ll(w.rawHeaders);if(An(w.statusCode)){let D=W.get("Location"),H=null;try{H=D===null?null:new URL(D,a.url)}catch{if(a.redirect!=="manual"){i(new ue(`uri requested responds with an invalid redirect URL: ${D}`,"invalid-redirect")),A();return}}switch(a.redirect){case"error":i(new ue(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),A();return;case"manual":break;case"follow":{if(H===null)break;if(a.counter>=a.follow){i(new ue(`maximum redirect reached at: ${a.url}`,"max-redirect")),A();return}let N={headers:new ie(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:Qt(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!El(a.url,H)||!Rl(a.url,H))for(let lt of["authorization","www-authenticate","cookie","cookie2"])N.headers.delete(lt);if(w.statusCode!==303&&a.body&&t.body instanceof me.default.Readable){i(new ue("Cannot follow redirect with body being a readable stream","unsupported-redirect")),A();return}(w.statusCode===303||(w.statusCode===301||w.statusCode===302)&&a.method==="POST")&&(N.method="GET",N.body=void 0,N.headers.delete("content-length"));let se=Wl(W);se&&(N.referrerPolicy=se),o(On(new je(H,N))),A();return}default:return i(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}p&&w.once("end",()=>{p.removeEventListener("abort",S)});let x=(0,me.pipeline)(w,new me.PassThrough,D=>{D&&i(D)});process.version<"v12.10"&&w.on("aborted",S);let k={url:a.url,status:w.statusCode,statusText:w.statusMessage,headers:W,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},z=W.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||z===null||w.statusCode===204||w.statusCode===304){m=new te(x,k),o(m);return}let Z={flush:Ct.default.Z_SYNC_FLUSH,finishFlush:Ct.default.Z_SYNC_FLUSH};if(z==="gzip"||z==="x-gzip"){x=(0,me.pipeline)(x,Ct.default.createGunzip(Z),D=>{D&&i(D)}),m=new te(x,k),o(m);return}if(z==="deflate"||z==="x-deflate"){let D=(0,me.pipeline)(w,new me.PassThrough,H=>{H&&i(H)});D.once("data",H=>{(H[0]&15)===8?x=(0,me.pipeline)(x,Ct.default.createInflate(),N=>{N&&i(N)}):x=(0,me.pipeline)(x,Ct.default.createInflateRaw(),N=>{N&&i(N)}),m=new te(x,k),o(m)}),D.once("end",()=>{m||(m=new te(x,k),o(m))});return}if(z==="br"){x=(0,me.pipeline)(x,Ct.default.createBrotliDecompress(),D=>{D&&i(D)}),m=new te(x,k),o(m);return}m=new te(x,k),o(m)}),xl(v,a).catch(i)})}function Ad(n,t){let o=Cr.Buffer.from(`0\r
\r
`),i=!1,a=!1,l;n.on("response",f=>{let{headers:b}=f;i=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),n.on("socket",f=>{let b=()=>{if(i&&!a){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}},p=m=>{a=Cr.Buffer.compare(m.slice(-5),o)===0,!a&&l&&(a=Cr.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Cr.Buffer.compare(m.slice(-2),o.slice(3))===0),l=m};f.prependListener("close",b),f.on("data",p),n.on("close",()=>{f.removeListener("close",b),f.removeListener("data",p)})})}var Gl=require("@raycast/api");var vd={logs:new Map,set:(n,t)=>{xn.logs.set(new Date,{message:n,error:t})},clear:()=>xn.logs.clear(),toString:()=>{let n="";return xn.logs.forEach((t,o)=>{n.length>0&&(n+=`

`),n+=`[${o.toISOString()}] ${t.message}`,t.error&&(n+=`: ${Ka(t.error)}`)}),n}},xn=Object.freeze(vd),re=(n,t)=>{xn.set(n,t),Gl.environment.isDevelopment&&console.error(n,t)};function Kl(n,t,o){return new Promise((i,a)=>{let l=(0,Ql.parse)(n);On(l.href).then(f=>{if(!f.ok)throw new Error(`Response status ${f.status}: ${f.statusText}`);if(!f.body)throw new Error("No response body");let b=(0,Vl.createWriteStream)(t),p=parseInt(f.headers.get("content-length")||"0",10);if(p===0)throw new Error("Invalid file size");let m=0;f.body.on("data",y=>{b.write(y),m+=y.length,o?.(Math.floor(m/p*100))}),f.body.on("end",()=>{b.on("finish",i),b.end()}),f.body.on("error",async y=>{b.close(),await(0,Yl.unlink)(t),re(`Failed to download file ${n}`,y),a(y)})}).catch(a)})}var{supportPath:Pt}=K.environment,Od="2",Ln=(()=>{let n=(0,Ir.join)(Pt,`bw-bin-download-error-${Od}.log`);return{logError:t=>et(()=>(0,pe.writeFileSync)(n,t?.message??"Unexpected error")),clearError:()=>et(()=>(0,pe.unlinkSync)(n)),hasError:()=>et(()=>(0,pe.existsSync)(n),!1)}})(),Pr={version:"2024.2.0",sha256:"fd80ffefd4686e677d7c8720258b3c92559b65b890519b1327cd4bb45887dde8",downloadPage:"https://github.com/bitwarden/clients/releases",path:{arm64:"/opt/homebrew/bin/bw",x64:"/usr/local/bin/bw",get downloadedBin(){return(0,Ir.join)(Pt,Pr.binFilename)},get installedBin(){return process.arch==="arm64"?this.arm64:this.x64},get bin(){return Ln.hasError()?this.installedBin:this.downloadedBin}},get binFilename(){return`bw-${this.version}`},get downloadUrl(){return`${this.downloadPage}/download/cli-v${this.version}/bw-macos-${this.version}.zip`},checkHashMatchesFile:function(n){return fl(n)===this.sha256}},Dn=class{constructor(t){this.callbacks={};this.preferences=(0,K.getPreferenceValues)();this.wasCliUpdated=!1;this.showToast=async t=>{if(this.toastInstance){let o={message:this.toastInstance.message,title:this.toastInstance.title,primaryAction:this.toastInstance.primaryAction,secondaryAction:this.toastInstance.secondaryAction};return t.style&&(this.toastInstance.style=t.style),this.toastInstance.message=t.message,this.toastInstance.title=t.title,this.toastInstance.primaryAction=t.primaryAction,this.toastInstance.secondaryAction=t.secondaryAction,await this.toastInstance.show(),Object.assign(this.toastInstance,{restore:async()=>{await this.showToast(o)}})}else{let o=await(0,K.showToast)(t);return Object.assign(o,{restore:()=>o.hide()})}};let{cliPath:o,clientId:i,clientSecret:a,serverCertsPath:l}=this.preferences,f=Qa();this.toastInstance=t,this.cliPath=o||Pr.path.bin,this.env={BITWARDENCLI_APPDATA_DIR:Pt,BW_CLIENTSECRET:a.trim(),BW_CLIENTID:i.trim(),PATH:(0,Zl.dirname)(process.execPath),...f&&l?{NODE_EXTRA_CA_CERTS:l}:{}},this.initPromise=(async()=>{await this.ensureCliBinary(),await this.checkServerUrl(f),this.lockReason=await K.LocalStorage.getItem(Ue.VAULT_LOCK_REASON)})()}async ensureCliBinary(){if(this.checkCliBinIsReady(this.cliPath))return;if(this.cliPath===this.preferences.cliPath)throw new bn(`Bitwarden CLI not found at ${this.cliPath}`);Ln.hasError()&&Ln.clearError();let t=await al("bw-",Pt),o=await this.showToast({title:`${t?"Updating":"Initializing"} Bitwarden CLI`,style:K.Toast.Style.Animated,primaryAction:{title:"Open Download Page",onAction:()=>(0,K.open)(Pr.downloadPage)}}),a=(0,Ir.join)(Pt,"bw.zip");try{try{if(o.message="Downloading...",await Kl(Pr.downloadUrl,a,l=>o.message=`Downloading ${l}%`),!Pr.checkHashMatchesFile(a))throw new Gt("Binary hash does not match")}catch(l){throw o.title="Failed to download Bitwarden CLI",l}try{o.message="Extracting...",await sl(a,Pt);let l=(0,Ir.join)(Pt,"bw");await il(l),await(0,Zt.rename)(l,this.cliPath),await(0,Zt.chmod)(this.cliPath,"755"),await(0,Zt.rm)(a,{force:!0}),this.wasCliUpdated=!0}catch(l){throw o.title="Failed to extract Bitwarden CLI",l}await o.hide()}catch(l){throw o.message=l instanceof Gt?l.message:"Please try again",o.style=K.Toast.Style.Failure,ll(a,this.cliPath),Ln.logError(l),l instanceof Error?new Gt(`${l.name}: ${l.message}`,l.stack):l}finally{await o.restore()}}checkCliBinIsReady(t){try{return(0,pe.existsSync)(this.cliPath)?((0,pe.accessSync)(t,pe.constants.X_OK),!0):!1}catch{return(0,pe.chmodSync)(t,"755"),!0}}setActionCallback(t,o){return this.callbacks[t]=o,this}setSessionToken(t){this.env={...this.env,BW_SESSION:t}}clearSessionToken(){delete this.env.BW_SESSION}withSession(t){return this.tempSessionToken=t,this}async initialize(){return await this.initPromise,this}async checkServerUrl(t){if((await K.LocalStorage.getItem(Ue.SERVER_URL)||"")===t)return;let i=await this.showToast({style:K.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||$a],{resetVaultTimeout:!1}),await K.LocalStorage.setItem(Ue.SERVER_URL,t),i.style=K.Toast.Style.Success,i.title="Success",i.message="Bitwarden server changed"}catch(a){i.style=K.Toast.Style.Failure,i.title="Failed to switch server",a instanceof Error?i.message=a.message:i.message="Unknown error occurred"}finally{await i.restore()}}async setLockReason(t){this.lockReason=t,await K.LocalStorage.setItem(Ue.VAULT_LOCK_REASON,t)}async clearLockReason(){this.lockReason&&(await K.LocalStorage.removeItem(Ue.VAULT_LOCK_REASON),this.lockReason=void 0)}async exec(t,o){let{abortController:i,input:a="",resetVaultTimeout:l}=o??{},f=this.env;this.tempSessionToken&&(f={...f,BW_SESSION:this.tempSessionToken},this.tempSessionToken=void 0);let b=await ja(this.cliPath,t,{input:a,env:f,signal:i?.signal});if(this.isPromptWaitingForMasterPassword(b))throw await this.lock(),new yn;return l&&await K.LocalStorage.setItem(Ue.LAST_ACTIVITY_TIME,new Date().toISOString()),b}async login(){try{return await this.exec(["login","--apikey"],{resetVaultTimeout:!0}),await this.clearLockReason(),await this.callbacks.login?.(),{result:void 0}}catch(t){re("Failed to login",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async logout(t){try{return t&&await this.setLockReason(t),await this.exec(["logout"],{resetVaultTimeout:!1}),await this.handlePostLogout(),{result:void 0}}catch(o){re("Failed to logout",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async lock(t,o){try{if(o){let{error:i,result:a}=await this.status();if(i)throw i;if(a.status!=="unauthenticated")return{error:new yr("Not logged in")}}return t&&await this.setLockReason(t),await this.exec(["lock"],{resetVaultTimeout:!1}),await this.callbacks.lock?.(t),{result:void 0}}catch(i){re("Failed to lock vault",i);let{error:a}=await this.handleCommonErrors(i);if(!a)throw i;return{error:a}}}async unlock(t){try{let{stdout:o}=await this.exec(["unlock",t,"--raw"],{resetVaultTimeout:!0});return this.setSessionToken(o),await this.clearLockReason(),await this.callbacks.unlock?.(t,o),{result:o}}catch(o){re("Failed to unlock vault",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async sync(){try{return await this.exec(["sync"],{resetVaultTimeout:!0}),{result:void 0}}catch(t){re("Failed to sync vault",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async listItems(){try{let{stdout:t}=await this.exec(["list","items"],{resetVaultTimeout:!0});return{result:JSON.parse(t).filter(i=>!!i.name)}}catch(t){re("Failed to list items",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async listFolders(){try{let{stdout:t}=await this.exec(["list","folders"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){re("Failed to list folder",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async createFolder(t){try{let o=await this.getTemplate("folder");o.name=t;let i=await this.encode(JSON.stringify(o));return await this.exec(["create","folder",i],{resetVaultTimeout:!0}),{result:void 0}}catch(o){re("Failed to create folder",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async getTotp(t){try{let{stdout:o}=await this.exec(["get","totp",t],{resetVaultTimeout:!0});return{result:o}}catch(o){re("Failed to get TOTP",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async status(){try{let{stdout:t}=await this.exec(["status"],{resetVaultTimeout:!1});return{result:JSON.parse(t)}}catch(t){re("Failed to get status",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async checkLockStatus(){try{return await this.exec(["unlock","--check"],{resetVaultTimeout:!1}),"unlocked"}catch(t){return re("Failed to check lock status",t),t.stderr==="Vault is locked."?"locked":"unauthenticated"}}async getTemplate(t){try{let{stdout:o}=await this.exec(["get","template",t],{resetVaultTimeout:!0});return JSON.parse(o)}catch(o){re("Failed to get template",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async encode(t){let{stdout:o}=await this.exec(["encode"],{input:t,resetVaultTimeout:!1});return o}async generatePassword(t,o){let i=t?Va(t):[],{stdout:a}=await this.exec(["generate",...i],{abortController:o,resetVaultTimeout:!1});return a}isPromptWaitingForMasterPassword(t){return!!(t.stderr&&t.stderr.includes("Master password"))}async handlePostLogout(){this.clearSessionToken(),await this.callbacks.logout?.()}async handleCommonErrors(t){let o=t.stderr;return o?/not logged in/i.test(o)?(await this.handlePostLogout(),{error:new yr("Not logged in")}):{}:{}}};var Ce=require("@raycast/api");var Xl=(n,t=!1)=>{let o=n.charAt(0).toUpperCase(),i=t?n.slice(1).toLowerCase():n.slice(1);return o+i};async function Jl(n,t){let o=(0,Ce.getPreferenceValues)().windowActionOnCopy,i=Xl(n,!0);o==="keepOpen"?await(0,Ce.showToast)({title:i,message:t,style:Ce.Toast.Style.Success}):o==="closeAndPopToRoot"?(await(0,Ce.showHUD)(i),await(0,Ce.popToRoot)()):await(0,Ce.showHUD)(i)}var{generatePasswordQuickAction:xd}=(0,fe.getPreferenceValues)(),Ld={copy:async n=>{await fe.Clipboard.copy(n,{transient:ko("password")}),await Jl("Copied password to clipboard")},paste:async n=>{await fe.Clipboard.paste(n)},copyAndPaste:async n=>{await fe.Clipboard.copy(n,{transient:ko("password")}),await fe.Clipboard.paste(n),await(0,fe.showHUD)("Copied password to clipboard")}};async function Dd(){let n=await(0,fe.showToast)(fe.Toast.Style.Animated,"Generating password...");try{let t=await new Dn(n).initialize(),o=await Ya(),i=await t.generatePassword(o);await Ld[xd](i)}catch(t){n.style=fe.Toast.Style.Failure,n.message="Failed to generate",re("Failed to generate password",t)}}var kd=Dd;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.2
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
*/
